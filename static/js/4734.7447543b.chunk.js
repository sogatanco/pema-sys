"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[4734],{34734:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(65043),s=r(203),a=r(89379),l=r(35475),o=r(22345),i=r(49157),c=r(18353),d=r(35299),u=r(26259),p=r(23222),h=r(10591),b=r(20782),g=r(7493),f=r(72679),m=r(97877),j=r(87426),v=r(3655),x=r(93397),y=r(40028),O=r(18707),A=r(70579);const k=e=>{let{title:t,data:r,source:s,refetch:k}=e;const[w,N]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),[q,T]=(0,n.useState)(),[P,R]=(0,n.useState)(),[M,D]=(0,n.useState)(),[L,z]=(0,n.useState)(!1),[I,W]=(0,n.useState)(),[K,B]=(0,n.useState)(!1),[F,G]=(0,n.useState)(),Q=()=>{N(!w)},U=()=>{C(!S)},$=()=>{_(!E)},J=(0,x.A)(),Y=e=>{D((t=>(0,a.A)((0,a.A)({},t),{},{[e.target.id]:e.target.value})))},Z=async()=>{z(!0),M.email=P,await J.post("dapi/vendor/sendmail",M).then((()=>{(0,y.x)("success","Email berhasil dikirim")})).catch((()=>{(0,y.x)("error","Gagal mengirim email")})),N(!1),z(!1)},H=(e,t)=>{_(!0),W(t),(async e=>{await J.get("dapi/vendor/log/".concat(e)).then((e=>G(e.data.data))).catch((e=>console.log(e)))})(e)},V=async()=>{B(!0),await J.post("dapi/vendor/verifikasi/".concat(q),{status:"terverifikasi"}).then((()=>{k(),(0,y.x)("success","Data Perusahaan ".concat(I," telah terverifikasi."))})).catch((()=>{(0,y.x)("error","Gagal mengirim data")})),C(!1),B(!1)};return(0,A.jsx)(o.A,{lg:"12",children:(0,A.jsx)(i.A,{className:"",children:(0,A.jsxs)(c.A,{className:"d-flex flex-column gap-2",children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,A.jsx)(d.A,{tag:"h4",children:t}),(0,A.jsx)(l.N_,{to:"projects",style:{textDecoration:"none"}})]}),(null===r||void 0===r?void 0:r.length)>0?r.map((e=>(0,A.jsxs)("div",{className:"d-flex justify-content-between rounded-3 px-3 py-3 align-items-center text-dark bg-light",children:[(0,A.jsxs)("div",{className:"d-flex flex-column",children:[(0,A.jsxs)("h4",{className:"fw-bold",children:[e.bentuk_usaha," ",e.nama_perusahaan]}),(0,A.jsxs)("small",{children:["Request at ",(0,O.A)(e.updated_at)]})]}),(0,A.jsxs)("div",{className:"d-flex gap-3",children:[(0,A.jsx)(l.N_,{to:"check/".concat(e.perusahaan_id,"?source=").concat(s),children:(0,A.jsx)(u.A,{type:"button",color:"secondary",children:"Document"})}),(0,A.jsx)(u.A,{type:"button",color:"secondary",onClick:()=>{return t=e.perusahaan_id,r=e.email,N(!0),T(t),void R(r);var t,r},children:"Email"}),(0,A.jsxs)(p.A,{isOpen:w,toggle:Q.bind(null),centered:!0,size:"lg",children:[(0,A.jsx)(h.A,{toggle:Q.bind(null),children:"Kirim Email"}),(0,A.jsxs)(b.A,{children:[(0,A.jsxs)("h4",{children:["To: ",P]}),(0,A.jsx)("hr",{}),(0,A.jsx)(g.A,{htmlFor:"subject",children:"Add subject "}),(0,A.jsx)(f.A,{type:"text",id:"subject",name:"subject",onChange:e=>Y(e)}),(0,A.jsx)(f.A,{type:"textarea",id:"content",name:"content",className:"mt-4",rows:"10",onChange:e=>Y(e)})]}),(0,A.jsxs)(m.A,{children:[(0,A.jsx)(u.A,{color:"primary",onClick:Z,disabled:L,children:L?(0,A.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,A.jsx)(j.A,{size:"sm"}),"Mengirim.."]}):"Kirim"}),(0,A.jsx)(u.A,{color:"secondary",outline:!0,onClick:Q.bind(null),children:"Cancel"})]})]}),(0,A.jsx)(u.A,{color:"secondary",onClick:()=>{return t=e.perusahaan_id,r=e.nama_perusahaan,C(!0),T(t),void W(r);var t,r},children:"Approve"}),(0,A.jsxs)(p.A,{isOpen:S,toggle:U.bind(null),centered:!0,children:[(0,A.jsx)(h.A,{toggle:U.bind(null),children:"Konfirmasi"}),(0,A.jsx)(b.A,{children:(0,A.jsx)("div",{className:"d-flex text-center",children:(0,A.jsxs)("p",{children:[" ","Data perusahaan ",(0,A.jsx)("strong",{children:I})," akan diubah menjadi terverifikasi. Lanjutkan?"]})})}),(0,A.jsxs)(m.A,{children:[K?(0,A.jsx)(u.A,{type:"button",color:"primary",disabled:!0,children:(0,A.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,A.jsx)(j.A,{size:"sm"}),"Loading.."]})}):(0,A.jsx)(u.A,{type:"button",color:"primary",onClick:V,children:"Ya"}),(0,A.jsx)(u.A,{color:"secondary",onClick:U.bind(null),children:"Cancel"})]})]}),(0,A.jsx)(u.A,{color:"secondary",outline:!0,onClick:()=>H(e.perusahaan_id,e.nama_perusahaan),children:"Log"}),(0,A.jsxs)(p.A,{isOpen:E,toggle:$.bind(null),centered:!0,size:"lg",children:[(0,A.jsx)(h.A,{toggle:$.bind(null),children:"Log"}),(0,A.jsx)(b.A,{style:{height:"500px",overflow:"auto"},children:(0,A.jsx)(v.A,{hover:!0,children:(0,A.jsx)("tbody",{children:null===F||void 0===F?void 0:F.map((e=>(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:e.aktifitas}),(0,A.jsx)("td",{children:(0,O.A)(e.created_at)})]},e.id_log)))})})}),(0,A.jsx)(m.A,{children:(0,A.jsx)(u.A,{color:"secondary",onClick:$.bind(null),children:"Tutup"})})]})]})]},e.perusahaan_id))):"No data."]})})})},w=()=>{const[e,t]=(0,n.useState)(),[r,a]=(0,n.useState)(),l=(0,x.A)(),{data:o,refetch:i}=(0,s.I)({queryKey:["request-list"],queryFn:()=>l.get("dapi/vendor/request-list").then((e=>e.data.data))});return(0,n.useEffect)((()=>{const e=null===o||void 0===o?void 0:o.filter((e=>"review_submit"===e.status_verifikasi_admin));t(e);const r=null===o||void 0===o?void 0:o.filter((e=>"review_update"===e.status_verifikasi_admin));a(r)}),[o]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k,{title:"Company Data Requests",data:e,source:"submit",refetch:i}),(0,A.jsx)(k,{title:"Company Update Data Requests",data:r,source:"update",refetch:i})]})}},18707:(e,t,r)=>{r.d(t,{A:()=>n});const n=e=>{if(e){const t=new Date,r=new Date(e),n=r.toDateString()===t.toDateString()?"Today":r.toDateString(),s=r.toLocaleString().split(",")[1];return"".concat(n,", ").concat(s.split(":")[0],":").concat(s.split(":")[1]," ").concat(s.split(" ")[2]||"")}return e}},35299:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(65043),s=r(65173),a=r.n(s),l=r(98139),o=r.n(l),i=r(96794),c=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var p={className:a().string,cssModule:a().object,tag:i.Wx};function h(e){var t=e.className,r=e.cssModule,s=e.tag,a=void 0===s?"div":s,l=u(e,c),p=(0,i.qO)(o()(t,"card-title"),r);return n.createElement(a,d({},l,{className:p}))}h.propTypes=p;const b=h},97877:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(65043),s=r(65173),a=r.n(s),l=r(98139),o=r.n(l),i=r(96794),c=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var p={className:a().string,cssModule:a().object,tag:i.Wx};function h(e){var t=e.className,r=e.cssModule,s=e.tag,a=void 0===s?"div":s,l=u(e,c),p=(0,i.qO)(o()(t,"modal-footer"),r);return n.createElement(a,d({},l,{className:p}))}h.propTypes=p;const b=h},10591:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(65043),s=r(65173),a=r.n(s),l=r(98139),o=r.n(l),i=r(96794),c=["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","close"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var p={children:a().node,className:a().string,close:a().object,closeAriaLabel:a().string,cssModule:a().object,tag:i.Wx,toggle:a().func,wrapTag:i.Wx};function h(e){var t,r=e.className,s=e.cssModule,a=e.children,l=e.toggle,p=e.tag,h=void 0===p?"h5":p,b=e.wrapTag,g=void 0===b?"div":b,f=e.closeAriaLabel,m=void 0===f?"Close":f,j=e.close,v=u(e,c),x=(0,i.qO)(o()(r,"modal-header"),s);return!j&&l&&(t=n.createElement("button",{type:"button",onClick:l,className:(0,i.qO)("btn-close",s),"aria-label":m})),n.createElement(g,d({},v,{className:x}),n.createElement(h,{className:(0,i.qO)("modal-title",s)},a),j||t)}h.propTypes=p;const b=h},3655:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(65043),s=r(65173),a=r.n(s),l=r(98139),o=r.n(l),i=r(96794),c=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var p={bordered:a().bool,borderless:a().bool,className:a().string,cssModule:a().object,dark:a().bool,hover:a().bool,innerRef:a().oneOfType([a().func,a().string,a().object]),responsive:a().oneOfType([a().bool,a().string]),responsiveTag:i.Wx,size:a().string,striped:a().bool,tag:i.Wx};function h(e){var t=e.className,r=e.cssModule,s=e.size,a=e.bordered,l=e.borderless,p=e.striped,h=e.dark,b=e.hover,g=e.responsive,f=e.tag,m=void 0===f?"table":f,j=e.responsiveTag,v=void 0===j?"div":j,x=e.innerRef,y=u(e,c),O=(0,i.qO)(o()(t,"table",!!s&&"table-"+s,!!a&&"table-bordered",!!l&&"table-borderless",!!p&&"table-striped",!!h&&"table-dark",!!b&&"table-hover"),r),A=n.createElement(m,d({},y,{ref:x,className:O}));if(g){var k=(0,i.qO)(!0===g?"table-responsive":"table-responsive-".concat(g),r);return n.createElement(v,{className:k},A)}return A}h.propTypes=p;const b=h},203:(e,t,r)=>{r.d(t,{I:()=>h});var n=r(68664),s=r(10765),a=r(65043),l=r(49939),o=r(28873),i=r(82670),c=r(59781),d=r(1968),u=r(54483),p=r(33729);function h(e,t,r){return function(e,t){const r=(0,c.jE)({context:e.context}),n=(0,d.w)(),s=(0,i.h)(),h=r.defaultQueryOptions(e);h._optimisticResults=n?"isRestoring":"optimistic",h.onError&&(h.onError=l.j.batchCalls(h.onError)),h.onSuccess&&(h.onSuccess=l.j.batchCalls(h.onSuccess)),h.onSettled&&(h.onSettled=l.j.batchCalls(h.onSettled)),(0,p.tu)(h),(0,u.LJ)(h,s),(0,u.wZ)(s);const[b]=a.useState((()=>new t(r,h))),g=b.getOptimisticResult(h);if((0,o.r)(a.useCallback((e=>{const t=n?()=>{}:b.subscribe(l.j.batchCalls(e));return b.updateResult(),t}),[b,n]),(()=>b.getCurrentResult()),(()=>b.getCurrentResult())),a.useEffect((()=>{b.setOptions(h,{listeners:!1})}),[h,b]),(0,p.EU)(h,g,n))throw(0,p.iL)(h,b,s);if((0,u.$1)({result:g,errorResetBoundary:s,useErrorBoundary:h.useErrorBoundary,query:b.getCurrentQuery()}))throw g.error;return h.notifyOnChangeProps?g:b.trackResult(g)}((0,n.vh)(e,t,r),s.$)}}}]);
//# sourceMappingURL=4734.7447543b.chunk.js.map