"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[8099],{48099:(s,a,e)=>{e.r(a),e.d(a,{default:()=>b});var r=e(72791),i=e(57823),n=e(63009),o=e(39773),t=e(43464),d=e(49037),c=e(76167),l=e(42976),m=e(19127),u=e(4828),h=e(11087),p=e(22339),x=e(8007),w=e(93863),j=e(70615),f=e(48089),g=e(80184);const b=()=>{const[s,a]=(0,r.useState)(!1),[e,b]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!0),[Z,S]=(0,r.useState)(!1),[P,v]=(0,r.useState)(!1),[y,B]=(0,r.useState)(""),K=(0,f.Z)(),$=new URLSearchParams(window.location.search).get("key");(0,r.useEffect)((()=>{!async function(){b(!0),K.get(`api/auth/forgot-password/${$}`).then((()=>{b(!1),k(!0)})).catch((()=>{b(!1),k(!1)}))}()}),[$]);const C=x.Ry().shape({password:x.Z_().required("Password baru harus diisi").min(8,"Password harus berisi min. 8 karakter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Harus Berisi 8 Karakter, Satu Huruf Besar, Satu Huruf Kecil, Satu Angka, dan Satu Karakter Khusus"),confirmPassword:x.Z_().required("Konfirmasi password harus diisi").oneOf([x.iH("password"),null],"Password harus cocok")});return(0,g.jsxs)("div",{className:"loginBox",children:[(0,g.jsx)(w.r,{className:"position-absolute left bottom-0"}),(0,g.jsx)(j.r,{className:"position-absolute end-0 top"}),(0,g.jsx)(i.Z,{fluid:!0,className:"h-100",children:(0,g.jsx)(n.Z,{className:"justify-content-center align-items-center h-100",children:(0,g.jsx)(o.Z,{lg:"12",className:"loginContainer",children:(0,g.jsx)(t.Z,{className:"rounded-4",children:e?(0,g.jsx)(d.Z,{className:"p-4 m-1",children:(0,g.jsx)("p",{className:"text-center",children:"Loading.."})}):(0,g.jsx)(d.Z,{className:"p-4 m-1",children:N?(0,g.jsx)(p.J9,{initialValues:{password:"",confirmPassword:""},validationSchema:C,onSubmit:s=>(async s=>{a(!0),s.token=$,await K.post("api/auth/new-password",s).then((()=>{S(!0),v(!1),a(!1),B("Password berhasil diubah. Silakan login kembali."),document.getElementById("form-pass").reset(),setTimeout((()=>{window.location.href="/auth/login"}),5e3)})).catch((()=>{S(!1),a(!1),v(!0),B("Gagal mengirim data. Silakan coba lagi")}))})(s),children:a=>{let{errors:e,touched:r}=a;return(0,g.jsxs)(g.Fragment,{children:[P||!Z&&(0,g.jsx)("h4",{className:"text-center",children:y}),(0,g.jsxs)(p.l0,{id:"form-pass",children:[(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(l.Z,{htmlFor:"password",className:"text-center",children:"Password Baru"}),(0,g.jsx)(p.gN,{id:"password",name:"password",type:"password",autoComplete:"on",className:`form-control${e.password&&r.password?" is-invalid":""} rounded-3`}),(0,g.jsx)(p.Bc,{name:"password",component:"div",className:"invalid-feedback"})]}),(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(l.Z,{htmlFor:"confirmPassword",className:"text-center",children:"Konfirmasi Password Baru"}),(0,g.jsx)(p.gN,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"on",className:`form-control${e.confirmPassword&&r.confirmPassword?" is-invalid":""} rounded-3`}),(0,g.jsx)(p.Bc,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]}),(0,g.jsx)(c.Z,{children:(0,g.jsx)("div",{className:"d-grid gap-2",children:(0,g.jsx)(m.Z,{type:"submit",color:"primary",className:"btn btn-primary btn-block mb-1 rounded-3",disabled:s,children:s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.Z,{className:"me-2",size:"sm",color:"light"}),"loading .."]}):"Submit"})})})]})]})}}):(0,g.jsx)("div",{className:"text-center",children:(0,g.jsxs)("h4",{children:["Link tidak valid atau expired. ",(0,g.jsx)("br",{}),(0,g.jsxs)("i",{children:[" ",(0,g.jsx)(h.rU,{to:"/auth/forgot-password",children:"Kirim ulang link"})]})]})})})})})})})]})}}}]);
//# sourceMappingURL=8099.3ddd225d.chunk.js.map