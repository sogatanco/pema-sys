"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[7354],{57354:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(72791),i=a(57689),l=a(11087),o=a(30690),r=a.n(o),s=a(16354),d=a(33237),c=a(97892),p=a.n(c),u=(a(75391),a(48089)),g=a(94061),m=a(94113),h=a(88009),v=a(80184);const b=()=>{const e=(0,n.useRef)(),{idDoc:t}=(0,i.UO)(),[a]=(0,l.lr)(),o=a.get("type"),[c,b]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[w,S]=(0,n.useState)(),N=(0,u.Z)();(0,n.useEffect)((()=>{!async function(){x(!0),await N.post(`dapi/verif/${t}`,{type:o}).then((e=>{console.log(e.data.data),"approve"===e.data.data.status?(x(!1),S(e.data.data)):(b(!0),x(!1))})).catch((()=>{b(!0),x(!1)}))}()}),[]);const A=()=>{console.log(null===w||void 0===w?void 0:w.detail),j(!0),setTimeout((()=>{j(!1),async function(t){try{var a;const n=await(0,h.Z)(t,e);(0,m.Z)(n,null===w||void 0===w||null===(a=w.detail)||void 0===a?void 0:a.fileLampiran).then((e=>{const t=window.open(e);if(!t||t.closed||"undefined"===typeof t.closed){const t=document.createElement("a");t.href=e,t.download="file.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t)}URL.revokeObjectURL(e)}))}catch(n){console.log(n)}}(null===w||void 0===w?void 0:w.detail)}),300)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"verified-status",children:(0,v.jsx)("div",{className:"content-status",children:f?(0,v.jsx)("h5",{children:"Loading..."}):c||null===w?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:g,alt:"logo"}),(0,v.jsxs)("div",{className:"verified",children:[(0,v.jsxs)("div",{className:"icon-close",children:[(0,v.jsx)("br",{}),"  ",(0,v.jsx)("br",{}),(0,v.jsx)(r(),{icon:"close"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("span",{style:{marginBottom:"-10px",textTransform:"uppercase"},children:(0,v.jsxs)("strong",{children:[" Dokumen ",null===w||void 0===w?void 0:w.jenis_name]})}),(0,v.jsx)("span",{className:"small mt-0",children:"ini tidak terdaftar di database kami"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsxs)("div",{className:"copyright",children:[(0,v.jsx)("span",{children:"DOCUMENT VERIFICATION SYSTEM"}),(0,v.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," PT Pembangunan Aceh"]})]}),(0,v.jsx)("br",{})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:g,alt:"logo"}),(0,v.jsxs)("div",{className:"verified",children:[(0,v.jsx)("div",{className:"icon-check",children:(0,v.jsx)(r(),{icon:"check"})}),(0,v.jsx)("span",{style:{marginBottom:"-10px",textTransform:"uppercase"},children:(0,v.jsxs)("strong",{children:[" Dokumen ",null===w||void 0===w?void 0:w.jenis_name]})}),(0,v.jsx)("span",{className:"small mt-0",children:"ini benar telah ditandatangani"})]}),(0,v.jsxs)("div",{className:"spda-status-container",children:[(0,v.jsxs)("div",{className:"no-spda",children:[(0,v.jsx)("span",{children:"oleh"}),(0,v.jsx)("span",{children:null===w||void 0===w?void 0:w.employe_name})]}),(0,v.jsxs)("div",{className:"spda-status",children:[(0,v.jsx)("span",{children:"sebagai"}),(0,v.jsx)("span",{children:null===w||void 0===w?void 0:w.id_current_position})]}),(0,v.jsxs)("div",{className:"spda-status",children:[(0,v.jsx)("span",{children:"Pada"}),(0,v.jsx)("span",{children:p()(null===w||void 0===w?void 0:w.updated_at).locale("id").format("dddd, DD MMMM YYYY")||""})]})]}),2===(null===w||void 0===w?void 0:w.jenis_doc)&&(0,v.jsxs)(s.Z,{color:"info",style:{zIndex:3,cursor:"pointer"},onClick:()=>A(),children:[" ",y?"Loading...":"Lihat surat"," "]}),(0,v.jsx)("br",{}),(0,v.jsxs)("div",{className:"copyright",children:[(0,v.jsx)("span",{children:"DOCUMENT VERIFICATION SYSTEM"}),(0,v.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," PT Pembangunan Aceh"]})]})]})})}),(0,v.jsx)("div",{ref:e,style:{display:"none"},children:(0,v.jsx)(d.QRCode,{value:`https://sys.ptpema.co.id/verification/${null===w||void 0===w?void 0:w.no_document}?type=sign`,size:400,qrStyle:"dots",logoImage:g,logoWidth:100,logoHeight:100,eyeRadius:20,fgColor:"#0F52BA"})})]})}},94113:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(36963);const i=async(e,t)=>{if(!t){const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),a=new Blob([t],{type:"application/pdf"});return URL.createObjectURL(a)}const a=new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),i=new Uint8Array(atob(t).split("").map((e=>e.charCodeAt(0)))),l=await(async(e,t)=>{const a=await n.PDFDocument.create(),i=await n.PDFDocument.load(e),l=await n.PDFDocument.load(t),o=await a.copyPages(i,i.getPageIndices()),r=await a.copyPages(l,l.getPageIndices());o.forEach((e=>{a.addPage(e)})),r.forEach((e=>{a.addPage(e)}));return await a.save()})(a,i),o=new Blob([l],{type:"application/pdf"});return URL.createObjectURL(o)}},88009:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(66435),i=a(59437),l=a.n(i),o=a(74228);const r=function(e){const t=["Nol","Satu","Dua","Tiga","Empat","Lima","Enam","Tujuh","Delapan","Sembilan","Sepuluh","Sebelas"];if(e<12)return t[e];const a=["","Belas","Puluh","Ratus","Ribu","Juta","Miliar","Triliun"];let n="";const i=e.toString(),l=null===i||void 0===i?void 0:i.length;if(l>12)return"Angka terlalu besar";for(let o=0;o<l;o++){const e=parseInt(i.charAt(o),10),r=l-o-1;if(0===e&&(n+=""),1===r&&1===e&&"0"!==i.charAt(o+1)){n+=" Sebelas";break}n+=` ${t[e]} ${a[r]}`}return n.trim()},s=a(64073),d=(e,t)=>new Promise(((a,i)=>{n.vfs=s.pdfMake.vfs,n.fonts={Archivo:{normal:"Archivo-Regular.ttf",bold:"Archivo-SemiBold.ttf",italics:"Archivo-Italic.ttf",bolditalics:"Archivo-SemiBoldItalic.ttf"}};const d=`<p style="margin-bottom:5px">Banda Aceh, ${new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(null===e||void 0===e?void 0:e.tglSurat))}</p>  \n      \n        <table style="border-collapse: collapse; width: 100%; border: 0px;" border="1"; padding="0";><colgroup><col style="width: 13%;"><col style="width: 2%;"><col style="width: 85%;"></colgroup>\n        <tbody>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2; " >Nomor</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;" >:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${null===e||void 0===e?void 0:e.nomorSurat}</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Lampiran</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${Number(null===e||void 0===e?void 0:e.lampiran)>0?`${null===e||void 0===e?void 0:e.lampiran} (${r(Number(null===e||void 0===e?void 0:e.lampiran))}) ${(null===e||void 0===e?void 0:e.jenisLampiran)||" Eks"}`:"-"}</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Perihal</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${null===e||void 0===e?void 0:e.perihal}</td>\n          </tr>\n        </tbody>\n      </table>\n\n        <div style="line-height: 1.2; margin-top:3; margin-bottom:-12">Kepada Yth<br>\n            <strong style="line-height: 0.9!important;">${null===e||void 0===e?void 0:e.kepada}</strong><br>\n            di - <br>\n            <span>          Tempat</span>\n        </div>\n       <span style="line-height: 1.3; text-align:justify">  ${null===e||void 0===e?void 0:e.isiSurat}</span>\n  \n      `;if(t.current){const r=t.current.querySelector("canvas");if(r){var c,p,u;const t=r.toDataURL(),s={pageOrientation:"portrait",pageSize:"A4",pageMargins:[50,70,50,70],content:[l()(d,{defaultStyles:{p:{margin:[0,3,0,-12]},td:{verticalAlign:"top",marginBottom:-4,heigt:"auto"},ol:{margin:[0,0,0,-15],padding:[0,0,0,0]},ul:{margin:[0,0,0,-15],padding:[0,0,0,0]},li:{marginBottom:2},tr:{margin:[-5,0,0,0]},table:{margin:[0,-3,0,-7],width:"100%"},br:{margin:[0,0,0,0]}},tableAutoSize:!0}),{stack:[{text:"Hormat Kami, ",style:"normal"},{text:"PT PEMBANGUNAN ACEH",style:"boldText"},{image:`${"signed"===(null===e||void 0===e?void 0:e.status)?t:o.Z.placeholder}`,width:60},{text:`${null===e||void 0===e||null===(c=e.signer)||void 0===c?void 0:c.first_name}`,style:"boldText"},{text:`${null===e||void 0===e||null===(p=e.signer)||void 0===p?void 0:p.position_name}`,style:"normal"}],unbreakable:!0,margin:[0,10]},{text:(null===e||void 0===e||null===(u=e.tembusans)||void 0===u?void 0:u.length)>0?"Tembusan Yth : ":"",style:"normal"},{ol:null===e||void 0===e?void 0:e.tembusans}],background:()=>null!==e&&void 0!==e&&e.draft?{image:o.Z.draft,width:300,height:300,opacity:.2,marginTop:250,marginLeft:150}:"",styles:{boldText:{bold:!0}},images:d.images,header:e=>1!==e?{text:""}:{image:o.Z.headSurat,width:"595"},footer:(e,t)=>e!==t?{text:""}:{image:o.Z.footSurat,width:"595"},defaultStyle:{font:"Archivo",fontSize:10,color:"#000",ol:{margin:[0,0,0,0],padding:[0,0,0,0]}}};n.createPdf(s).getBase64((e=>{e?a(e):i(new Error("Error generating base64 PDF"))}))}}}))},16354:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(72791),i=a(52007),l=a.n(i),o=a(81694),r=a.n(o),s=a(9622),d=["className","cssModule","color","innerRef","pill","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var u={children:l().node,className:l().string,color:l().string,cssModule:l().object,innerRef:l().oneOfType([l().object,l().func,l().string]),pill:l().bool,tag:s.iC};function g(e){var t=e.className,a=e.cssModule,i=e.color,l=void 0===i?"secondary":i,o=e.innerRef,u=e.pill,g=void 0!==u&&u,m=e.tag,h=void 0===m?"span":m,v=p(e,d),b=(0,s.mx)(r()(t,"badge","bg-"+l,!!g&&"rounded-pill"),a);return v.href&&"span"===h&&(h="a"),n.createElement(h,c({},v,{className:b,ref:o}))}g.propTypes=u;const m=g}}]);
//# sourceMappingURL=7354.6d258fa9.chunk.js.map