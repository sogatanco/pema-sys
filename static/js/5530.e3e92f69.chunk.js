"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[5530],{45530:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(89379),l=a(65043),n=a(88881),i=a(67073),o=a(12327),c=a(22345),d=a(49157),r=a(26259),u=a(14701),h=a(33552),m=(a(38421),a(93397)),x=a(30342),g=a(70579);const j=()=>{var e,t,a;const[s,i]=(0,l.useState)(""),j=(0,n.MW)(),p=(0,m.A)(),v=(0,l.useRef)(null),{auth:f}=(0,x.A)(),[b,A]=(0,l.useState)(""),[w,N]=(0,l.useState)({lat:null,lng:null}),[k,y]=(0,l.useState)(!1),[M,S]=(0,l.useState)(""),[C,I]=(0,l.useState)([]),P=(new Date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),_=()=>{p.get("dapi/hr/office").then((e=>{var t,a,s,l,n,i,o,c;console.log(e),N({lat:parseFloat(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.office.latitude),lng:parseFloat(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.office.longitude)}),S(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.profil),I(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.absen)}))},T=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};A("".concat(e.coords.latitude,",").concat(e.coords.longitude)),console.log("tete",t),setTimeout((()=>{((e,t)=>{const a=e.lat*Math.PI/180,s=t.lat*Math.PI/180,l=(t.lat-e.lat)*Math.PI/180,n=(t.lng-e.lng)*Math.PI/180,i=Math.sin(l/2)*Math.sin(l/2)+Math.cos(a)*Math.cos(s)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3})(t,w)<=100?y(!0):(i(""),j.show("Lokasi Tidak Sesuai, coba lagi !",t.lng))}),1e3)}),(e=>{j.show("Error pada pengambilan lokasi: ",e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):j.show("Geolocation tidak didukung oleh browser ini.")};(0,l.useEffect)((()=>{_()}),[]);return(0,g.jsxs)("div",{className:"absen-container",children:[(0,g.jsx)("div",{className:"head bg-primary text-white py-5 px-3 w-100",children:(0,g.jsxs)(o.A,{className:"align-items-center",children:[(0,g.jsxs)(c.A,{children:[(0,g.jsxs)("h3",{className:"fs-4",children:["Halo, ",null===f||void 0===f||null===(e=f.user)||void 0===e?void 0:e.first_name]}),(0,g.jsx)("p",{children:(()=>{const e=(new Date).getHours();return e>=5&&e<12?"Selamat Pagi":e>=12&&e<15?"Selamat Siang":e>=15&&e<18?"Selamat Sore":"Selamat Malam"})()})]}),(0,g.jsx)(c.A,{className:"text-end",children:(0,g.jsx)("img",{src:""!==M?M:"https://cdn.idntimes.com/content-images/post/20230515/gambar-profil-wa-keren-41d3732660868cf4a36d801d1301f672.jpg",alt:"Profile",className:"profile-img"})})]})}),(0,g.jsxs)("div",{className:"bawah mt-n5",children:[(0,g.jsxs)(o.A,{className:"text-center",children:[(0,g.jsx)(c.A,{children:(0,g.jsxs)(d.A,{className:"p-2",children:[(0,g.jsx)("div",{className:"menu-item",children:"\ud83d\udd52"}),(0,g.jsx)("span",{className:"text-muted small",children:"Riwayat"})]})}),(0,g.jsx)(c.A,{children:(0,g.jsxs)(d.A,{className:"p-2",children:[(0,g.jsx)("div",{className:"menu-item",children:"\ud83d\udcc4"}),(0,g.jsx)("span",{className:"text-muted small",children:"Pengajuan"})]})}),(0,g.jsx)(c.A,{children:(0,g.jsxs)(d.A,{className:"p-2",children:[(0,g.jsx)("div",{className:"menu-item",children:"\ud83d\udcc6"}),(0,g.jsx)("span",{className:"text-muted small",children:"Cuti"})]})})]}),(0,g.jsxs)(d.A,{className:"p-3 mt-3",children:[(0,g.jsx)("span",{className:"small mb-4",children:P}),(0,g.jsxs)(o.A,{className:"d-flex align-items-center mb-3",children:[(0,g.jsx)(c.A,{children:(0,g.jsxs)("span",{className:"small",children:[(0,g.jsx)("strong",{children:null!==C&&void 0!==C&&C.time_in?"".concat(null===C||void 0===C||null===(t=C.time_in)||void 0===t?void 0:t.substring(0,5)," WIB\u2705"):"08:00 WIB"}),(0,g.jsx)("br",{}),"Actual Clock In"]})}),(0,g.jsx)(c.A,{children:(0,g.jsx)(r.A,{color:"warning",className:"w-100",outline:!0,onClick:()=>{i("in"),T()},children:"in"===s?"Loading . . . .":"Masuk \u279c"})})]}),(0,g.jsxs)(o.A,{className:"d-flex align-items-center mb-3",children:[(0,g.jsx)(c.A,{children:(0,g.jsxs)("span",{className:"small",children:[(0,g.jsx)("strong",{children:null!==C&&void 0!==C&&C.time_out?"".concat(null===C||void 0===C||null===(a=C.time_out)||void 0===a?void 0:a.substring(0,5)," WIB\u2705"):"17:30 WIB"}),(0,g.jsx)("br",{}),"Actual Clock Out"]})}),(0,g.jsx)(c.A,{children:(0,g.jsx)(r.A,{color:"info",className:"w-100",outline:!0,onClick:()=>{i("out"),T()},children:"out"===s?"Loading . . . .":"Pulang \u279c"})})]})]})]}),k&&(0,g.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#000",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,g.jsxs)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:[(0,g.jsx)(u.i,{ref:v,facingMode:"user",videoConstraints:{width:1080,height:1920,facingMode:"user"},style:{width:"100%",height:"100%",objectFit:"cover",zIndex:1}}),(0,g.jsx)(h.A,{style:{fontSize:32,color:"#000"}}),(0,g.jsx)("button",{type:"button",onClick:async()=>{const e=v.current.takePhoto();y(!1),await p.post("dapi/hr/clock_in",{poto:e,jenis:s,latlong:b}).then((e=>{console.log(e),j.show(e.data.message),i(""),_()}))},style:{position:"absolute",bottom:"80px",left:"50%",transform:"translateX(-50%)",width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",border:"none",zIndex:2,cursor:"pointer"}})]})})]})},p=()=>{const e={position:n.Xq.BOTTOM_CENTER,timeout:5e3,offset:"10px",transition:n.bm.SCALE,containerStyle:{textTransform:"none"}};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(n.Kq,(0,s.A)((0,s.A)({template:i.A},e),{},{children:[(0,g.jsx)("link",{rel:"icon",href:"https://api.ptpema.co.id/adm/dokumentasi/absen.ico"}),(0,g.jsx)(j,{})]}))})}}}]);
//# sourceMappingURL=5530.e3e92f69.chunk.js.map