"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[8876],{82959:(e,a,n)=>{n.d(a,{x:()=>r,y:()=>i});n(65043);var l=n(23768),t=n(70579);const i=()=>(0,t.jsx)(l.l$,{toastOptions:{className:"",style:{}}}),r=(e,a)=>{((e,a)=>{"success"===e?l.Ay.success(a):"create"===e?(0,l.Ay)(a,{icon:"\ud83e\udd17"}):"start"===e?(0,l.Ay)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,l.Ay)("Horeee, task done!",{icon:"\ud83d\udc4f"}):l.Ay.error(a)})(e,a)}},77199:(e,a,n)=>{n.d(a,{A:()=>o});var l=n(55510),t=n(28249),i=n(73216),r=n(35475),s=n(70579);const o=()=>{const e=(0,i.zy)(),a=e.pathname.split("/")[1],n=e.pathname.split("/")[2];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{className:"text-capitalize",children:"".concat(n||a)}),(0,s.jsxs)(l.A,{children:[(0,s.jsx)(t.A,{to:"/",tag:r.N_,className:"text-decoration-none",children:"Home"}),a?(0,s.jsx)(t.A,{active:!0,children:a}):"",n?(0,s.jsx)(t.A,{active:!0,children:n}):""]})]})}},92791:(e,a,n)=>{n.r(a),n.d(a,{default:()=>re});var l=n(65043),t=n(77199),i=n(22016),r=n(15710),s=n(86506),o=n(24056),d=n(93933),c=n(49157),u=n(18353),m=n(55080),h=n(65113),p=n(86178),g=n.n(p),b=(n(63578),n(70579));const x=()=>{g().locale("id");const e=[{id:1,group:1,title:"Wahyudin",start_time:g()("2023-09-14 16:34:11","YYYY-MM-DD HH:mm:ss"),end_time:g()("2023-09-14 17:34:11","YYYY-MM-DD HH:mm:ss"),bgColor:"rgba(225, 166, 244, 0.6)"},{id:2,group:2,title:"Safrian",start_time:g()("2023-09-14 15:30:00","YYYY-MM-DD HH:mm:ss"),end_time:g()("2023-09-14 16:30:00","YYYY-MM-DD HH:mm:ss"),bgColor:"rgba(100, 200, 100, 0.6)"},{id:3,group:1,title:"Syahrial",start_time:g()("2023-09-14 18:00:00","YYYY-MM-DD HH:mm:ss"),end_time:g()("2025-02-27 19:00:00","YYYY-MM-DD HH:mm:ss"),bgColor:"rgba(225, 166, 244, 0.6)"}];return(0,b.jsx)("div",{children:(0,b.jsx)(h.Ay,{groups:[{id:1,title:"Avanza BL 123 AT"},{id:2,title:"INNOVA 23 BB"},{id:3,title:"INNOVA 23 BB"},{id:4,title:"INNOVA 23 BB"},{id:5,title:"INNOVA 23 BB"}],items:e,defaultTimeStart:g()().add(0,"day"),defaultTimeEnd:g()().add(12,"hour"),headerLabelFormats:{yearLong:"YYYY",yearShort:"YY",monthShort:"MMM YYYY",monthMedium:"MMMM YYYY",monthLong:"MMMM YYYY",dayShort:"DD MMM",dayLong:"dddd, DD MMM YYYY",hourShort:"HH:mm",hourMedium:"HH:mm",hourLong:"HH:mm:ss"}})})};var j=n(22019),v=n(34535),A=n(5174),y=n(30815),k=n(37970),f=n(42788);const M=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#546E7A","#26a69a","#D10CE8"],C=()=>{const[e]=l.useState({series:[{data:[12,22,10,28,16,21,13,30]}],options:{chart:{height:350,type:"bar"},colors:M,plotOptions:{bar:{columnWidth:"45%",distributed:!0}},dataLabels:{enabled:!1},legend:{show:!1},xaxis:{categories:[["AVANZA","BL 1243 AT"],["AVANZA","Smith"],["AVANZA","Williams"],"Amber",["Peter","Brown"],["Mary","Evans"],["David","Wilson"],["Lily","Roberts"]],labels:{style:{colors:M,fontSize:"12px"}}}}}),[a,n]=(0,l.useState)("all"),[t,i]=(0,l.useState)(""),[r,s]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),m=(0,v.Ay)(A.A)({borderRadius:"17px",backgroundColor:"white",letterSpacing:"0.5px",border:"none","& .MuiOutlinedInput-notchedOutline":{borderRadius:"17px",border:"none"}});return(0,b.jsxs)("div",{className:"chart-container",children:[(0,b.jsxs)(y.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,b.jsx)("h4",{style:{fontWeight:"bold",color:"black"},children:"Grafik BBM Mobil Operasional"}),(0,b.jsxs)(y.A,{display:"flex",alignItems:"center",children:[(0,b.jsx)(y.A,{className:"me-2",children:(0,b.jsxs)(m,{value:a,onChange:e=>{n(e.target.value),i(""),s(""),d(""),u("")},displayEmpty:!0,size:"small",children:[(0,b.jsx)(k.A,{value:"monthly",children:"Bulanan"}),(0,b.jsx)(k.A,{value:"yearly",children:"Tahunan"}),(0,b.jsx)(k.A,{value:"custom",children:"Kustom"}),(0,b.jsx)(k.A,{value:"all",children:"Semua"})]})}),"monthly"===a&&(0,b.jsxs)(y.A,{display:"flex",alignItems:"center",children:[(0,b.jsxs)(m,{value:t,onChange:e=>i(e.target.value),displayEmpty:!0,size:"small",sx:{mr:1},children:[(0,b.jsx)(k.A,{value:"",children:(0,b.jsx)("em",{children:"Pilih Bulan"})}),Array.from({length:12},((e,a)=>(0,b.jsx)(k.A,{value:a+1,children:"Bulan ".concat(a+1)},a)))]}),(0,b.jsxs)(m,{value:r,onChange:e=>s(e.target.value),displayEmpty:!0,size:"small",children:[(0,b.jsx)(k.A,{value:"",children:(0,b.jsx)("em",{children:"Pilih Tahun"})}),Array.from({length:10},((e,a)=>(0,b.jsx)(k.A,{value:2023+a,children:2023+a},a)))]})]}),"yearly"===a&&(0,b.jsx)(y.A,{children:(0,b.jsxs)(m,{value:r,onChange:e=>s(e.target.value),displayEmpty:!0,size:"small",children:[(0,b.jsx)(k.A,{value:"",children:(0,b.jsx)("em",{children:"Pilih Tahun"})}),Array.from({length:10},((e,a)=>(0,b.jsx)(k.A,{value:2023+a,children:2023+a},a)))]})}),"custom"===a&&(0,b.jsxs)(y.A,{display:"flex",alignItems:"center",children:[(0,b.jsx)(f.A,{label:"Tanggal Mulai",type:"date",value:o,onChange:e=>d(e.target.value),size:"small",InputLabelProps:{shrink:!0},sx:{mr:1}}),(0,b.jsx)(f.A,{label:"Tanggal Akhir",type:"date",value:c,onChange:e=>u(e.target.value),size:"small",InputLabelProps:{shrink:!0}})]})]})]}),(0,b.jsx)(j.A,{options:e.options,series:e.series,type:"bar",height:350})]})},Y=[{name:"Toyota Innova",sales:"BL 2342 AT",image:"https://agungtoyota.co.id/app/sam/assets/product_car_model/a1f5610604298e07d5b4b2c369555fda.png"},{name:"Totota Avsanza",sales:"BL 3543 LW",image:"https://www.seva.id/_next/image?url=https%3A%2F%2Fimages.prod.seva.id%2FToyota%2FAll%20New%20Avanza%2Fmain_color%2Fhitam.png&w=640&q=75"},{name:"Totota Avasnza",sales:"BL 1543 LW",image:"https://www.seva.id/_next/image?url=https%3A%2F%2Fimages.prod.seva.id%2FToyota%2FAll%20New%20Avanza%2Fmain_color%2Fhitam.png&w=640&q=75"},{name:"Totota Avaehwnza",sales:"BL 1222 LH",image:"https://www.seva.id/_next/image?url=https%3A%2F%2Fimages.prod.seva.id%2FToyota%2FAll%20New%20Avanza%2Fmain_color%2Fhitam.png&w=640&q=75"}],S=()=>{const e=(0,l.useRef)(null);return(0,b.jsxs)("div",{className:"available-cars",children:[(0,b.jsx)("button",{type:"button",className:"arrow-button left-arrow",onClick:()=>{e.current.scrollLeft-=300},children:"<"}),(0,b.jsx)("div",{className:"car-list",ref:e,children:Y.map((e=>(0,b.jsxs)("div",{className:"car-card",children:[(0,b.jsx)("img",{src:e.image,alt:e.name,className:"car-image"}),(0,b.jsx)("h4",{children:e.name}),(0,b.jsx)("span",{children:e.sales})]},e.name)))}),(0,b.jsx)("button",{type:"button",className:"arrow-button right-arrow",onClick:()=>{e.current.scrollLeft+=300},children:">"})]})};var B=n(89379),N=n(81509),w=n(58390),D=n(89302),P=n(66919),H=n(18039),T=n(57972),F=n(74605),I=n(14256),_=n(11906),O=n(60446),L=n.n(O),K=n(82959),E=n(93397),R=n(58786),z=n(20917),V=(n(94727),n(30342));const W=(0,l.forwardRef)(((e,a)=>{const n=(0,E.A)(),[t,i]=(0,l.useState)([]),{auth:r}=(0,V.A)(),s=(0,l.useCallback)((()=>{var e,a;console.log(r.user);const l=null!==(e=r.user)&&void 0!==e&&null!==(a=e.roles)&&void 0!==a&&a.includes("PICMobil")?"dapi/mobil/get-permintaan-all":"dapi/mobil/get-permintaan";n.get(l).then((e=>{const a=e.data.data.map((e=>(0,B.A)((0,B.A)({},e),{},{displayMobil:"".concat(e.brand," - ").concat(e.plat)})));i(a)})).catch((e=>{console.error("Error fetching data:",e)}))}),[r.user,n]);(0,l.useEffect)((()=>{s()}),[]),(0,l.useImperativeHandle)(a,(()=>({refreshData:s})));const o=[{name:"Aksi",cell:e=>{var a,l,t,i;return(0,b.jsxs)(b.Fragment,{children:[(null===(a=r.user)||void 0===a||null===(l=a.roles)||void 0===l?void 0:l.includes("PICMobil"))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(_.A,{variant:"contained",color:"success",size:"small",onClick:()=>(e=>{n.post("dapi/mobil/approve-permintaan/".concat(e)).then((()=>{(0,K.x)("success","Permintaan berhasil disetujui."),s()})).catch((e=>{console.error("Error approving request:",e),(0,K.x)("error","Terjadi kesalahan saat menyetujui permintaan.")}))})(null===e||void 0===e?void 0:e.id),style:{marginRight:"5px"},children:"Approve"}),(0,b.jsx)(_.A,{variant:"contained",color:"error",size:"small",onClick:()=>(e=>{let a="";(0,z.ZX)({title:"Konfirmasi Penolakan",message:"Masukkan alasan penolakan:",customUI:l=>{let{onClose:t}=l;return(0,b.jsxs)("div",{className:"custom-ui",children:[(0,b.jsx)("h1",{children:"Konfirmasi Penolakan"}),(0,b.jsx)(f.A,{label:"Alasan Penolakan",fullWidth:!0,multiline:!0,rows:3,onChange:e=>{a=e.target.value}}),(0,b.jsxs)("div",{style:{marginTop:"20px"},children:[(0,b.jsx)(_.A,{variant:"contained",color:"primary",onClick:()=>{a.trim()?(n.post("dapi/mobil/reject-permintaan/".concat(e),{ket:a}).then((()=>{(0,K.x)("success","Permintaan berhasil ditolak."),s()})).catch((e=>{console.error("Error rejecting request:",e),(0,K.x)("error","Terjadi kesalahan saat menolak permintaan.")})),t()):(0,K.x)("error","Harap masukkan alasan penolakan.")},children:"Submit"}),(0,b.jsx)(_.A,{variant:"outlined",color:"secondary",onClick:t,style:{marginLeft:"10px"},children:"Batal"})]})]})}})})(null===e||void 0===e?void 0:e.id),style:{marginRight:"5px"},children:"Reject"})]}),!(null!==(t=r.user)&&void 0!==t&&null!==(i=t.roles)&&void 0!==i&&i.includes("PICMobil"))&&(0,b.jsx)(_.A,{variant:"contained",color:"error",size:"small",disabled:null!==(null===e||void 0===e?void 0:e.status),onClick:()=>((e,a)=>{null===a?(0,z.ZX)({title:"Konfirmasi Hapus",message:"Apakah Anda yakin ingin menghapus permintaan ini?",buttons:[{label:"Ya",onClick:()=>{n.post("dapi/mobil/delete-permintaan/".concat(e)).then((()=>{(0,K.x)("success","Permintaan berhasil dihapus."),s()})).catch((e=>{console.error("Error deleting data:",e),(0,K.x)("error","Terjadi kesalahan saat menghapus permintaan.")}))}},{label:"Tidak",onClick:()=>{}}]}):(0,K.x)("error","Tidak bisa dihapus, permintaan sudah direview.")})(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.status),children:"Hapus"})]})},ignoreRowClick:!0,allowOverflow:!0,button:!0,width:"250px"},{name:"Tgl Pengajuan",selector:e=>null!==e&&void 0!==e&&e.created_at?new Date(null===e||void 0===e?void 0:e.created_at).toLocaleString():"Unknown",sortable:!0},{name:"Keperluan",selector:e=>null===e||void 0===e?void 0:e.keperluan,sortable:!0},{name:"Mobil",selector:e=>(null===e||void 0===e?void 0:e.displayMobil)||"-",sortable:!0},{name:"Dari",selector:e=>new Date(null===e||void 0===e?void 0:e.mulai).toLocaleString(),sortable:!0},{name:"Sampai",selector:e=>new Date(null===e||void 0===e?void 0:e.hingga).toLocaleString(),sortable:!0},{name:"Perlu Sopir",selector:e=>1===(null===e||void 0===e?void 0:e.sopir)?"Ya":"Tidak",sortable:!0},{name:"Status",selector:e=>null===(null===e||void 0===e?void 0:e.status)?"Under Review":0===(null===e||void 0===e?void 0:e.status)?"Reject":1===(null===e||void 0===e?void 0:e.status)?"Approve":"Unknown",sortable:!0},{name:"Keterangan",selector:e=>(null===e||void 0===e?void 0:e.ket)||"-",sortable:!1}];return(0,b.jsx)(R.Ay,{title:"List Permintaan Kendaraan",columns:o,data:t,pagination:!0,highlightOnHover:!0,striped:!0})})),Z=W,q=()=>{const e=(0,E.A)(),[a,n]=(0,l.useState)(""),[t,i]=(0,l.useState)(null),[r,s]=(0,l.useState)(null),[o,d]=(0,l.useState)(0),m=(0,l.useRef)(null),[h,p]=l.useState(!0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.A,{children:(0,b.jsxs)(u.A,{children:[(0,b.jsx)(N.A,{color:"info",isOpen:h,toggle:()=>p(!1),fade:!1,children:"Permintaan Mobil Minimal 1 Jam sebelum pemakaian"}),(0,b.jsxs)(y.A,{component:"form",onSubmit:l=>{if(l.preventDefault(),!a||!t||!r)return void(0,K.x)("error","Harap isi semua field sebelum mengajukan permintaan.");const c={keperluan:a,dari:t?L()(t).format("YYYY-MM-DD HH:mm:ss"):null,sampai:r?L()(r).format("YYYY-MM-DD HH:mm:ss"):null,perluSopir:o};e.post("dapi/mobil/insert-permintaan",c).then((e=>{console.log("Data submitted successfully:",e.data),(0,K.x)("success","Permintaan berhasil diajukan!"),n(""),i(null),s(null),d(0),m.current&&m.current.refreshData()})).catch((e=>{console.error("Error submitting data:",e),(0,K.x)("error","Terjadi kesalahan saat mengajukan permintaan.")}))},sx:{"& .MuiTextField-root":{m:1,width:"100%"},"& .MuiAutocomplete-root":{m:1,width:"100%"},"& .MuiButton-root":{m:1,width:"100%"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",margin:"auto"},noValidate:!0,autoComplete:"off",children:[(0,b.jsx)(f.A,{required:!0,id:"keperluan",label:"Keperluan",variant:"outlined",value:a,onChange:e=>n(e.target.value)}),(0,b.jsxs)(w.$,{dateAdapter:D.R,children:[(0,b.jsx)(P.K,{renderInput:e=>(0,b.jsx)(f.A,(0,B.A)({},e)),label:"Dari",ampm:!1,value:t,onChange:i,viewRenderers:{hours:H.Zo,minutes:H.Zo}}),(0,b.jsx)(P.K,{renderInput:e=>(0,b.jsx)(f.A,(0,B.A)({},e)),label:"Sampai",ampm:!1,value:r,onChange:s,viewRenderers:{hours:H.Zo,minutes:H.Zo}})]}),(0,b.jsx)(y.A,{sx:{"& .MuiFormLabel-root":{m:1,width:"100%"},"& .MuiRadioGroup-root":{m:1,width:"100%"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid #ccc",borderRadius:"4px",paddingLeft:"20px",paddingRight:"20px",width:"100%",margin:"auto",marginTop:"8px"},children:(0,b.jsxs)(T.A,{row:!0,value:o,onChange:e=>d(e.target.value),sx:{justifyContent:"space-between",width:"100%"},children:[(0,b.jsx)(F.A,{value:"1",control:(0,b.jsx)(I.A,{}),label:"Memerlukan Sopir"}),(0,b.jsx)(F.A,{value:"0",control:(0,b.jsx)(I.A,{}),label:"Tidak Memerlukan Sopir"})]})}),(0,b.jsx)(_.A,{type:"submit",variant:"contained",color:"secondary",size:"large",children:"Submit Pemintaan"})]})]})}),(0,b.jsx)(c.A,{children:(0,b.jsx)(u.A,{children:(0,b.jsx)(Z,{ref:m})})})]})};var U=n(80045),G=n(28007);const J=["key"],X=()=>{const e=(0,E.A)(),[a,n]=(0,l.useState)(null),[t,i]=(0,l.useState)([]),[r,s]=(0,l.useState)(null),[o,d]=(0,l.useState)(""),[h,p]=(0,l.useState)("booking"),[g,x]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[A,M]=(0,l.useState)([]),[C,Y]=(0,l.useState)([]),[S,T]=(0,l.useState)([]),F=()=>{e.get("dapi/mobil/get-pengambilan").then((e=>{e.data.success&&T(e.data.data)})).catch((e=>{console.error("Error fetching pengambilan:",e)}))};(0,l.useEffect)((()=>{e.get("api/employe/assignment-list?search=all").then((e=>{i(e.data.data),console.log(e.data.data)})),e.get("dapi/mobil/get-permintaan-by-status").then((e=>{e.data.success&&(console.log(e),M(e.data.data))})).catch((e=>{console.error("Error fetching bookings:",e)})),e.get("dapi/mobil/get").then((e=>{e.data.success&&Y(e.data.data)})).catch((e=>{console.error("Error fetching mobils:",e)})),F()}),[]);const I={padding:"5px 10px",backgroundColor:"#007BFF",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"},O=[{name:"Pengembalian",cell:a=>a.real_pengembalian?(0,b.jsx)("span",{children:L()(a.real_pengembalian).format("YYYY-MM-DD HH:mm")}):(0,b.jsx)("button",{type:"button",style:I,onClick:()=>(a=>{let n=null;(0,z.ZX)({title:"Konfirmasi Pengembalian",message:"Cek apakah kilometer dan minyak sesuai?",customUI:l=>{let{onClose:t}=l;return(0,b.jsxs)("div",{className:"custom-ui",children:[(0,b.jsx)("h1",{children:"Konfirmasi Pengembalian"}),(0,b.jsx)("p",{children:"Cek apakah kilometer dan minyak sesuai?"}),(0,b.jsx)(f.A,{label:"Kilometer Terakhir",type:"number",fullWidth:!0,onChange:e=>{n=e.target.value}}),(0,b.jsxs)("div",{style:{marginTop:"20px"},children:[(0,b.jsx)(_.A,{variant:"contained",color:"primary",onClick:()=>{n?(e.post("dapi/mobil/pengembalian/".concat(a),{last_km:n}).then((e=>{e.data.success?((0,K.x)("success","Mobil berhasil dikembalikan."),F()):(0,K.x)("error","Gagal mengembalikan mobil.")})).catch((e=>{console.error("Error during return:",e),(0,K.x)("error","Terjadi kesalahan saat mengembalikan mobil.")})),t()):(0,K.x)("error","Harap masukkan kilometer terbaru.")},children:"Ya"}),(0,b.jsx)(_.A,{variant:"outlined",color:"secondary",onClick:t,style:{marginLeft:"10px"},children:"Tidak"})]})]})}})})(a.id),children:"Pengembalian"}),width:"150px",button:!0,sortable:!1},{name:"Nama Karyawan",selector:e=>e.employe_name||e.employe_name,sortable:!0},{name:"Pengambilan",selector:e=>e.taken_time||e.taken_time,sortable:!0},{name:"Perjanjian Pengembalian",selector:e=>e.pengembalian||e.pengembalian,sortable:!0},{name:"Nama Mobil",selector:e=>"".concat(e.brand," - ").concat(e.plat),sortable:!0}],V=(0,b.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"Tidak ada data yang tersedia."}),[W,Z]=l.useState(!0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.A,{children:[(0,b.jsx)(m.A,{children:(0,b.jsx)("strong",{children:"Pengambilan Mobil"})}),(0,b.jsxs)(u.A,{children:[(0,b.jsx)(N.A,{color:"info",isOpen:W,toggle:()=>Z(!1),fade:!1,children:"Utamakan yang telah melakukan booking terlebih dahulu"}),(0,b.jsxs)(y.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"100%"},"& .MuiAutocomplete-root":{m:1,width:"100%"},"& .MuiButton-root":{m:1,width:"100%"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",margin:"auto"},noValidate:!0,autoComplete:"off",onSubmit:l=>{if(l.preventDefault(),"booking"===h&&!o)return void(0,K.x)("error","Harap isi semua field (Mobil dan Perkiraan Pengembalian) sebelum menyimpan.");if("booking"!==h&&(!o||!a||!j||!r))return void(0,K.x)("error","Harap isi semua field sebelum menyimpan.");console.log(a);const t={id_mobil:o,booked:"booking"===h?g:null,employe_id:"booking"!==h?null===a||void 0===a?void 0:a.value:null,keperluan:"booking"!==h?j:null,sampai:L()(r).format("YYYY-MM-DD HH:mm:ss"),book:h};e.post("dapi/mobil/insert-pengambilan",t).then((e=>{e.data.success?((0,K.x)("success","Data pengambilan berhasil disimpan."),d(""),x(""),n(null),v(""),s(null),p("booking")):(0,K.x)("error","Gagal menyimpan data pengambilan.")})).catch((e=>{console.error("Error saving data:",e),(0,K.x)("error","Terjadi kesalahan saat menyimpan data.")}))},children:[(0,b.jsxs)(f.A,{style:{width:"100%"},variant:"outlined",value:h,onChange:e=>p(e.target.value),select:!0,label:"Booking / No Booking",children:[(0,b.jsx)(k.A,{value:"booking",children:"Booking"}),(0,b.jsx)(k.A,{value:"no-booking",children:"No Booking"})]}),"booking"===h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{style:{width:"100%"},variant:"outlined",value:g,onChange:e=>x(e.target.value),select:!0,label:"Nomor Booking",children:A.map((e=>(0,b.jsx)(k.A,{value:e.id,children:"".concat(e.created_by_name," - ").concat(L()(e.mulai).format("YYYY-MM-DD HH:mm")," s/d ").concat(L()(e.hingga).format("YYYY-MM-DD HH:mm"))},e.id)))}),(0,b.jsx)(f.A,{style:{width:"100%"},variant:"outlined",value:o,onChange:e=>d(e.target.value),select:!0,label:"Unit Mobil",children:C.map((e=>(0,b.jsx)(k.A,{value:e.id,children:"".concat(e.brand," - ").concat(e.plat)},e.id)))})]}),"booking"!==h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{style:{width:"100%"},variant:"outlined",value:o,onChange:e=>d(e.target.value),select:!0,label:"Unit Mobil",children:C.map((e=>(0,b.jsx)(k.A,{value:e.id,children:"".concat(e.brand," - ").concat(e.plat)},e.id)))}),t.length>0&&(0,b.jsx)(G.A,{style:{marginLeft:-10},disablePortal:!0,id:"combo-box-demo",options:t||[],value:a,onChange:(e,a)=>{"string"===typeof a?n({label:a}):a&&a.inputValue?n({label:a.inputValue}):n(a)},getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e.label,renderOption:(e,a)=>{const{key:n}=e,l=(0,U.A)(e,J);return(0,b.jsx)("li",(0,B.A)((0,B.A)({},l),{},{children:a.label}),n)},renderInput:e=>(0,b.jsx)(f.A,(0,B.A)((0,B.A)({},e),{},{label:"Nama Karyawan"}))}),(0,b.jsx)(f.A,{required:!0,id:"keperluan",label:"Keperluan",variant:"outlined",value:j,onChange:e=>v(e.target.value)}),(0,b.jsx)(w.$,{dateAdapter:D.R,children:(0,b.jsx)(P.K,{renderInput:e=>(0,b.jsx)(f.A,(0,B.A)({},e)),label:"Perkiraan Pengembalian",ampm:!1,value:r,onChange:s,viewRenderers:{hours:H.Zo,minutes:H.Zo}})})]}),(0,b.jsx)(_.A,{type:"submit",variant:"contained",color:"secondary",size:"large",children:"Simpan"})]})]})]}),(0,b.jsxs)(c.A,{children:[(0,b.jsx)(m.A,{children:(0,b.jsx)("strong",{children:"Pengembalian Mobil"})}),(0,b.jsx)(u.A,{children:(0,b.jsx)(R.Ay,{columns:O,data:S,noDataComponent:V,pagination:!0,fixedHeader:!0,sortable:!0,fixedHeaderScrollHeight:"300px"})})]})]})};var $=n(53193),Q=n(79190),ee=n(85865);const ae=["key"],ne=()=>{const e=(0,E.A)(),[a,n]=(0,l.useState)(""),[t,i]=(0,l.useState)(""),[r,s]=(0,l.useState)(""),[o,d]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[p,g]=(0,l.useState)([]),[x,j]=(0,l.useState)([]),[v,M]=(0,l.useState)({});return(0,l.useEffect)((()=>{e.get("api/employe/assignment-list?search=all").then((e=>{g(e.data.data),console.log(e.data.data)})),e.get("dapi/mobil/get").then((e=>{if(e.data.success){const a=e.data.data.map((e=>({value:e.id,label:"".concat(e.brand," - ").concat(e.plat)})));j(a)}})).catch((e=>{console.error("Error fetching unit mobil:",e)}))}),[]),(0,b.jsx)(c.A,{children:(0,b.jsx)(u.A,{children:(0,b.jsxs)(y.A,{component:"form",onSubmit:l=>{l.preventDefault();const c={};if(a||(c.unitMobil="Unit Mobil is required"),t||(c.jenisBbm="Jenis BBM is required"),(!r||Number.isNaN(Number(r))||Number(r)<=0)&&(c.jumlahBiaya="Jumlah Biaya must be a positive number"),o||(c.tanggal="Tanggal Pengisian is required"),m||(c.employe="Pengisian oleh is required"),Object.keys(c).length>0)return void M(c);const u=L()(o).format("YYYY-MM-DD HH:mm:ss"),p={id_mobil:a,jenis_bbm:t,jumlah:r,w_pengisian:u,oleh:null===m||void 0===m?void 0:m.value};e.post("dapi/mobil/insert-bbm",p).then((e=>{e.data.success?((0,K.x)("success","Data pengisian BBM berhasil disimpan."),n(""),i(""),s(""),d(null),h(null),M({})):(0,K.x)("error","Gagal menyimpan data pengisian BBM.")})).catch((e=>{console.error("Error submitting data:",e),(0,K.x)("error","Terjadi kesalahan saat menyimpan data pengisian BBM.")}))},noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",gap:2,margin:"auto",padding:2},children:[(0,b.jsxs)($.A,{fullWidth:!0,error:Boolean(v.unitMobil),children:[(0,b.jsx)(Q.A,{id:"unit-mobil-label",children:"Unit Kendaraan"}),(0,b.jsx)(A.A,{labelId:"unit-mobil-label",id:"unit-mobil",value:a,onChange:e=>n(e.target.value),label:"Unit Kendaraan",children:x.map((e=>(0,b.jsx)(k.A,{value:e.value,children:e.label},e.value)))}),v.unitMobil&&(0,b.jsx)(ee.A,{color:"error",children:v.unitMobil})]}),(0,b.jsxs)($.A,{fullWidth:!0,error:Boolean(v.jenisBbm),children:[(0,b.jsx)(Q.A,{id:"jenis-bbm-label",children:"Jenis BBM"}),(0,b.jsx)(A.A,{labelId:"jenis-bbm-label",id:"jenis-bbm",value:t,onChange:e=>i(e.target.value),label:"Jenis BBM",children:[{label:"Solar (CN 48)",value:"bio_solar",ron:"48",jenis:"diesel"},{label:"Dexlite (CN 51)",value:"dexlite",ron:"51",jenis:"diesel"},{label:"Pertalite (RON 90)",value:"pertalite",ron:"90",jenis:"bensin"},{label:"Pertamax (RON 92)",value:"pertamax",ron:"92",jenis:"bensin"},{label:"Pertamax Green (RON 95)",value:"pertamax_green",ron:"95",jenis:"bensin"},{label:"Pertamax Turbo (RON 98)",value:"pertamax_turbo",ron:"98",jenis:"bensin"},{label:"Dex (CN 53)",value:"dex",ron:"53",jenis:"diesel"}].map((e=>(0,b.jsx)(k.A,{value:e.value,children:e.label},e.value)))}),v.jenisBbm&&(0,b.jsx)(ee.A,{color:"error",children:v.jenisBbm})]}),(0,b.jsx)(f.A,{label:"Jumlah Biaya (Rp)",variant:"outlined",type:"number",value:r,onChange:e=>s(e.target.value),error:Boolean(v.jumlahBiaya),helperText:v.jumlahBiaya,fullWidth:!0}),(0,b.jsx)(w.$,{dateAdapter:D.R,children:(0,b.jsx)(P.K,{renderInput:e=>(0,b.jsx)(f.A,(0,B.A)({},e)),label:"Tgl Pengisian",ampm:!1,value:o,onChange:d,viewRenderers:{hours:H.Zo,minutes:H.Zo}})}),p.length>0&&(0,b.jsx)(G.A,{disablePortal:!0,id:"combo-box-demo",options:p||[],value:m,onChange:(e,a)=>{"string"===typeof a?h({label:a}):a&&a.inputValue?h({label:a.inputValue}):h(a)},getOptionLabel:e=>"string"===typeof e?e:e.inputValue?e.inputValue:e.label,renderOption:(e,a)=>{const{key:n}=e,l=(0,U.A)(e,ae);return(0,b.jsx)("li",(0,B.A)((0,B.A)({},l),{},{children:a.label}),n)},renderInput:e=>(0,b.jsx)(f.A,(0,B.A)((0,B.A)({},e),{},{label:"Pengisian oleh"}))}),(0,b.jsx)(_.A,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})})};var le=n(4598);const te=()=>{const e=(0,E.A)(),[a,n]=(0,l.useState)([]),[t,i]=l.useState(""),[r,s]=l.useState(""),[o,d]=l.useState(""),[h,p]=(0,l.useState)({}),g=()=>{e.get("dapi/mobil/get").then((e=>{e.data.success&&n(e.data.data)})).catch((e=>{console.log(e)}))};l.useEffect((()=>{g()}),[]);const x=[{name:"No",selector:(e,a)=>a+1,sortable:!0},{name:"Brand Kendaraan",selector:e=>e.brand,sortable:!0},{name:"Plat Kendaraan",selector:e=>e.plat,sortable:!0},{name:"Status",selector:a=>(0,b.jsx)(F.A,{control:(0,b.jsx)(le.A,{checked:"aktif"===a.status,onChange:()=>((a,n)=>{e.post("dapi/mobil/update/".concat(a),{status:"aktif"===n?"non-aktif":"aktif"}).then((e=>{e.data.success?((0,K.x)("success","Status berhasil diubah"),g()):(0,K.x)("error","Status gagal diubah")})).catch((e=>{console.log(e),(0,K.x)("error","Terjadi kesalahan saat mengubah status")}))})(a.id,a.status),color:"primary"}),label:"aktif"===a.status?"Aktif":"Nonaktif"})},{name:"Action",selector:a=>(0,b.jsx)(_.A,{size:"small",variant:"contained",color:"secondary",onClick:()=>{(a=>{(0,z.ZX)({title:"Konfirmasi Hapus",message:"Apakah Anda yakin ingin menghapus data ini?",buttons:[{label:"Ya",onClick:()=>{e.post("dapi/mobil/delete/".concat(a)).then((e=>{e.data.success?((0,K.x)("success","Data berhasil dihapus"),g()):(0,K.x)("error","Data gagal dihapus")})).catch((e=>{console.log(e),(0,K.x)("error","Terjadi kesalahan saat menghapus data")}))}},{label:"Tidak",onClick:()=>{}}]})})(a.id)},children:"Hapus"})}];return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(c.A,{children:[(0,b.jsx)(m.A,{children:(0,b.jsx)("strong",{children:"Management Kendaraan Operasional"})}),(0,b.jsxs)(u.A,{children:[(0,b.jsxs)(y.A,{component:"form",onSubmit:async a=>{a.preventDefault();const n={};t||(n.brand="Brand Kendaraan is required"),r||(n.plat="Plat Kendaraan is required"),o||(n.status="Status Kendaraan is required"),Object.keys(n).length>0?p(n):(await e.post("dapi/mobil/insert",{brand:t,plat:r,status:o}).then((e=>{e.data.success?((0,K.x)("success","Data berhasil disimpan"),i(""),s(""),d(""),g()):(0,K.x)("error","Data gagal disimpan")})).catch((e=>{console.log(e),(0,K.x)("error","Terjadi kesalahan saat menyimpan data")})),p({}))},noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",gap:2,margin:"auto",padding:2},children:[(0,b.jsx)(f.A,{label:"Merek Kendaraan",variant:"outlined",type:"text",value:t,onChange:e=>i(e.target.value),error:Boolean(h.brand),helperText:h.brand,fullWidth:!0}),(0,b.jsx)(f.A,{label:"Plat Kendaraan",variant:"outlined",type:"text",value:r,onChange:e=>s(e.target.value),error:Boolean(h.plat),helperText:h.plat,fullWidth:!0}),(0,b.jsxs)($.A,{fullWidth:!0,error:Boolean(h.status),children:[(0,b.jsx)(Q.A,{id:"unit-kendaraan-label",children:"Status"}),(0,b.jsxs)(A.A,{labelId:"unit-kendaraan-label",id:"unit-kendaraan",value:o,onChange:e=>d(e.target.value),label:"Unit Kendaraan",children:[(0,b.jsx)(k.A,{value:"aktif",children:"Aktif"}),(0,b.jsx)(k.A,{value:"non-aktif",children:"Non-Aktif"})]}),h.status&&(0,b.jsx)(ee.A,{color:"error",children:h.status})]}),(0,b.jsx)(_.A,{type:"submit",variant:"contained",color:"primary",children:"Tambah Data Kendaraan"})]}),(0,b.jsx)(R.Ay,{className:"mt-3",columns:x,data:a,pagination:!0,highlightOnHover:!0,pointerOnHover:!0,striped:!0,responsive:!0})]})]})})},ie=()=>{var e,a;const[n,t]=(0,l.useState)("1"),{auth:h}=(0,V.A)(),p=null===h||void 0===h||null===(e=h.user)||void 0===e||null===(a=e.roles)||void 0===a?void 0:a.includes("PICMobil");return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(i.Ay,{value:n,children:[(0,b.jsx)(c.A,{className:"mb-1",children:(0,b.jsxs)(r.A,{onChange:(e,a)=>{t(a)},"aria-label":"lab API tabs example",vertical:"sm",variant:"scrollable",scrollButtons:"auto",children:[(0,b.jsx)(o.A,{label:(0,b.jsxs)(d.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,b.jsx)("strong",{children:"DASHBOARD"})," \xa0\xa0"]}),value:"1"}),(0,b.jsx)(o.A,{label:(0,b.jsxs)(d.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,b.jsx)("strong",{children:"BOOKING"})," \xa0\xa0"]}),value:"2"}),p&&(0,b.jsx)(o.A,{label:(0,b.jsxs)(d.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,b.jsx)("strong",{children:"PENGAMBILAN & PENGEMBALIAN"})," \xa0\xa0"]}),value:"3"}),p&&(0,b.jsx)(o.A,{label:(0,b.jsxs)(d.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,b.jsx)("strong",{children:"PENGISIAN BBM"})," \xa0\xa0"]}),value:"4"}),p&&(0,b.jsx)(o.A,{label:(0,b.jsxs)(d.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,b.jsx)("strong",{children:"SETTING"})," \xa0\xa0"]}),value:"5"})]})}),(0,b.jsxs)(s.A,{value:"1",className:"ps-0 pe-0",children:[(0,b.jsx)(c.A,{className:"mt-4",children:(0,b.jsx)(u.A,{children:(0,b.jsx)(C,{})})}),(0,b.jsxs)(c.A,{className:"mt-4",children:[(0,b.jsx)(m.A,{children:(0,b.jsx)("strong",{children:"Mobil Operasional yang Tersedia"})}),(0,b.jsx)(u.A,{children:(0,b.jsx)(S,{})})]}),(0,b.jsxs)(c.A,{children:[(0,b.jsx)(m.A,{children:(0,b.jsx)("strong",{children:"Daftar Penggunaan Mobil"})}),(0,b.jsx)(u.A,{className:"px-4",children:(0,b.jsx)(x,{})})]})]}),(0,b.jsx)(s.A,{value:"2",className:"ps-0 pe-0",children:(0,b.jsx)(q,{})}),p&&(0,b.jsx)(s.A,{value:"3",className:"ps-0 pe-0",children:(0,b.jsx)(X,{})}),p&&(0,b.jsx)(s.A,{value:"4",className:"ps-0 pe-0",children:(0,b.jsx)(ne,{})}),p&&(0,b.jsx)(s.A,{value:"5",className:"ps-0 pe-0",children:(0,b.jsx)(te,{})})]})})},re=()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.A,{}),(0,b.jsx)(ie,{})]})}}]);
//# sourceMappingURL=8876.92214040.chunk.js.map