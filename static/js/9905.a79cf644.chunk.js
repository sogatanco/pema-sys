"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[9905],{29905:(s,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(65043),i=e(99904),n=e(12327),o=e(22345),t=e(49157),d=e(18353),c=e(97550),l=e(7493),m=e(26259),u=e(87426),h=e(35475),p=e(63516),w=e(80899),x=e(94504),j=e(52030),f=e(93397),b=e(70579);const g=()=>{const[s,a]=(0,r.useState)(!1),[e,g]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!0),[A,S]=(0,r.useState)(!1),[P,v]=(0,r.useState)(!1),[y,K]=(0,r.useState)(""),B=(0,f.A)(),C=new URLSearchParams(window.location.search).get("key");(0,r.useEffect)((()=>{!async function(){g(!0),B.get("api/auth/forgot-password/".concat(C)).then((()=>{g(!1),N(!0)})).catch((()=>{g(!1),N(!1)}))}()}),[C]);const F=w.Ik().shape({password:w.Yj().required("Password baru harus diisi").min(8,"Password harus berisi min. 8 karakter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Harus Berisi 8 Karakter, Satu Huruf Besar, Satu Huruf Kecil, Satu Angka, dan Satu Karakter Khusus"),confirmPassword:w.Yj().required("Konfirmasi password harus diisi").oneOf([w.KR("password"),null],"Password harus cocok")});return(0,b.jsxs)("div",{className:"loginBox",children:[(0,b.jsx)(x.h,{className:"position-absolute left bottom-0"}),(0,b.jsx)(j.h,{className:"position-absolute end-0 top"}),(0,b.jsx)(i.A,{fluid:!0,className:"h-100",children:(0,b.jsx)(n.A,{className:"justify-content-center align-items-center h-100",children:(0,b.jsx)(o.A,{lg:"12",className:"loginContainer",children:(0,b.jsx)(t.A,{className:"rounded-4",children:e?(0,b.jsx)(d.A,{className:"p-4 m-1",children:(0,b.jsx)("p",{className:"text-center",children:"Loading.."})}):(0,b.jsx)(d.A,{className:"p-4 m-1",children:k?(0,b.jsx)(p.l1,{initialValues:{password:"",confirmPassword:""},validationSchema:F,onSubmit:s=>(async s=>{a(!0),s.token=C,await B.post("api/auth/new-password",s).then((()=>{S(!0),v(!1),a(!1),K("Password berhasil diubah. Silakan login kembali."),document.getElementById("form-pass").reset(),setTimeout((()=>{window.location.href="/auth/login"}),5e3)})).catch((()=>{S(!1),a(!1),v(!0),K("Gagal mengirim data. Silakan coba lagi")}))})(s),children:a=>{let{errors:e,touched:r}=a;return(0,b.jsxs)(b.Fragment,{children:[P||!A&&(0,b.jsx)("h4",{className:"text-center",children:y}),(0,b.jsxs)(p.lV,{id:"form-pass",children:[(0,b.jsxs)(c.A,{children:[(0,b.jsx)(l.A,{htmlFor:"password",className:"text-center",children:"Password Baru"}),(0,b.jsx)(p.D0,{id:"password",name:"password",type:"password",autoComplete:"on",className:"form-control".concat(e.password&&r.password?" is-invalid":""," rounded-3")}),(0,b.jsx)(p.Kw,{name:"password",component:"div",className:"invalid-feedback"})]}),(0,b.jsxs)(c.A,{children:[(0,b.jsx)(l.A,{htmlFor:"confirmPassword",className:"text-center",children:"Konfirmasi Password Baru"}),(0,b.jsx)(p.D0,{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"on",className:"form-control".concat(e.confirmPassword&&r.confirmPassword?" is-invalid":""," rounded-3")}),(0,b.jsx)(p.Kw,{name:"confirmPassword",component:"div",className:"invalid-feedback"})]}),(0,b.jsx)(c.A,{children:(0,b.jsx)("div",{className:"d-grid gap-2",children:(0,b.jsx)(m.A,{type:"submit",color:"primary",className:"btn btn-primary btn-block mb-1 rounded-3",disabled:s,children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.A,{className:"me-2",size:"sm",color:"light"}),"loading .."]}):"Submit"})})})]})]})}}):(0,b.jsx)("div",{className:"text-center",children:(0,b.jsxs)("h4",{children:["Link tidak valid atau expired. ",(0,b.jsx)("br",{}),(0,b.jsxs)("i",{children:[" ",(0,b.jsx)(h.N_,{to:"/auth/forgot-password",children:"Kirim ulang link"})]})]})})})})})})})]})}}}]);
//# sourceMappingURL=9905.a79cf644.chunk.js.map