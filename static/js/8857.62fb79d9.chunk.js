"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[8857],{98857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var i=a(72791),l=a(64876),n=a(43464),r=a(49037),o=a(19127),s=a(83449),d=a(47283),c=a(82851),u=a(43896),h=a(10829),m=a(30690),g=a.n(m),p=a(29472),v=a(48089),b=a(64554),y=a(91904),x=a(49687),f=a(64387),j=a(8453),S=a(16354),w=a(71513),Z=a(33237),k=a(36963);const A=async(e,t)=>{if(!t){const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),a=new Blob([t],{type:"application/pdf"});return URL.createObjectURL(a)}const a=new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),i=new Uint8Array(atob(t).split("").map((e=>e.charCodeAt(0)))),l=await(async(e,t)=>{const a=await k.PDFDocument.create(),i=await k.PDFDocument.load(e),l=await k.PDFDocument.load(t),n=await a.copyPages(i,i.getPageIndices()),r=await a.copyPages(l,l.getPageIndices());n.forEach((e=>{a.addPage(e)})),r.forEach((e=>{a.addPage(e)}));return await a.save()})(a,i),n=new Blob([l],{type:"application/pdf"});return URL.createObjectURL(n)};var C=a(66435),N=a(59437),P=a.n(N),D=a(74228);const L=function(e){const t=["Nol","Satu","Dua","Tiga","Empat","Lima","Enam","Tujuh","Delapan","Sembilan","Sepuluh","Sebelas"];if(e<12)return t[e];const a=["","Belas","Puluh","Ratus","Ribu","Juta","Miliar","Triliun"];let i="";const l=e.toString(),n=null===l||void 0===l?void 0:l.length;if(n>12)return"Angka terlalu besar";for(let r=0;r<n;r++){const e=parseInt(l.charAt(r),10),o=n-r-1;if(0===e&&(i+=""),1===o&&1===e&&"0"!==l.charAt(r+1)){i+=" Sebelas";break}i+=` ${t[e]} ${a[o]}`}return i.trim()},T=a(64073),B=(e,t)=>new Promise(((a,i)=>{C.vfs=T.pdfMake.vfs,C.fonts={Archivo:{normal:"Archivo-Regular.ttf",bold:"Archivo-SemiBold.ttf",italics:"Archivo-Italic.ttf",bolditalics:"Archivo-SemiBoldItalic.ttf"}};const l=`<p style="margin-bottom:5px">Banda Aceh, ${new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(null===e||void 0===e?void 0:e.tglSurat))}</p>  \n      \n        <table style="border-collapse: collapse; width: 100%; border: 0px;" border="1"; padding="0";><colgroup><col style="width: 13%;"><col style="width: 2%;"><col style="width: 85%;"></colgroup>\n        <tbody>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2; " >Nomor</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;" >:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${null===e||void 0===e?void 0:e.nomorSurat}</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Lampiran</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${Number(null===e||void 0===e?void 0:e.lampiran)>0?`${null===e||void 0===e?void 0:e.lampiran} (${L(Number(null===e||void 0===e?void 0:e.lampiran))}) ${(null===e||void 0===e?void 0:e.jenisLampiran)||" Eks"}`:"-"}</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Perihal</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">${null===e||void 0===e?void 0:e.perihal}</td>\n          </tr>\n        </tbody>\n      </table>\n\n        <div style="line-height: 1.2; margin-top:3; margin-bottom:-12">Kepada Yth<br>\n            <strong style="line-height: 0.9!important;">${null===e||void 0===e?void 0:e.kepada}</strong><br>\n            di - <br>\n            <span>          Tempat</span>\n        </div>\n       <span style="line-height: 1.3; text-align:justify">  ${null===e||void 0===e?void 0:e.isiSurat}</span>\n  \n      `;if(t.current){const s=t.current.querySelector("canvas");if(s){var n,r,o;const t=s.toDataURL(),d={pageOrientation:"portrait",pageSize:"A4",pageMargins:[50,70,50,70],content:[P()(l,{defaultStyles:{p:{margin:[0,3,0,-12]},td:{verticalAlign:"top",marginBottom:-4,heigt:"auto"},ol:{margin:[0,0,0,-15],padding:[0,0,0,0]},ul:{margin:[0,0,0,-15],padding:[0,0,0,0]},li:{marginBottom:2},tr:{margin:[-5,0,0,0]},table:{margin:[0,-3,0,-7],width:"100%"},br:{margin:[0,0,0,0]}},tableAutoSize:!0}),{stack:[{text:"Hormat Kami, ",style:"normal"},{text:"PT PEMBANGUNAN ACEH",style:"boldText"},{image:`${"signed"===(null===e||void 0===e?void 0:e.status)?t:D.Z.placeholder}`,width:60},{text:`${null===e||void 0===e||null===(n=e.signer)||void 0===n?void 0:n.first_name}`,style:"boldText"},{text:`${null===e||void 0===e||null===(r=e.signer)||void 0===r?void 0:r.position_name}`,style:"normal"}],unbreakable:!0,margin:[0,10]},{text:(null===e||void 0===e||null===(o=e.tembusans)||void 0===o?void 0:o.length)>0?"Tembusan Yth : ":"",style:"normal"},{ol:null===e||void 0===e?void 0:e.tembusans}],background:()=>null!==e&&void 0!==e&&e.draft?{image:D.Z.draft,width:300,height:300,opacity:.2,marginTop:250,marginLeft:150}:"",styles:{boldText:{bold:!0}},images:l.images,header:e=>1!==e?{text:""}:{image:D.Z.headSurat,width:"595"},footer:(e,t)=>e!==t?{text:""}:{image:D.Z.footSurat,width:"595"},defaultStyle:{font:"Archivo",fontSize:10,color:"#000",ol:{margin:[0,0,0,0],padding:[0,0,0,0]}}};C.createPdf(d).getBase64((e=>{e?a(e):i(new Error("Error generating base64 PDF"))}))}}}));var E=a(78194);const I=e=>new Promise((t=>{let a="";const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{a=i.result,t(a)}}));var R=a(31043),U=a(94061);const F=function(e){if(e<=0||e>3999)return"Angka di luar rentang yang valid (1-3999)";const t=[{value:1e3,symbol:"M"},{value:900,symbol:"CM"},{value:500,symbol:"D"},{value:400,symbol:"CD"},{value:100,symbol:"C"},{value:90,symbol:"XC"},{value:50,symbol:"L"},{value:40,symbol:"XL"},{value:10,symbol:"X"},{value:9,symbol:"IX"},{value:5,symbol:"V"},{value:4,symbol:"IV"},{value:1,symbol:"I"}];let a="";for(let i=0;i<t.length;i++)for(;e>=t[i].value;)a+=t[i].symbol,e-=t[i].value;return a};var $=a(80184);const z=e=>{let{divisis:t,mydivisi:a}=e;const l=(0,v.Z)(),n=(0,i.useRef)(),r=JSON.parse(localStorage.getItem("dataSurat")),[s,d]=(0,i.useState)((null===r||void 0===r?void 0:r.ttdBys)||[]),[c,u]=(0,i.useState)((null===r||void 0===r?void 0:r.kepada)||""),[h,m]=(0,i.useState)((null===r||void 0===r?void 0:r.perihal)||""),[g,p]=(0,i.useState)((null===r||void 0===r?void 0:r.ttdBy)||""),[k,C]=(0,i.useState)((null===r||void 0===r?void 0:r.tembusan)||""),[N,P]=(0,i.useState)((null===r||void 0===r?void 0:r.tembusans)||[]),[D,L]=(0,i.useState)((null===r||void 0===r?void 0:r.lampiran)||""),[T,z]=(0,i.useState)((null===r||void 0===r?void 0:r.jenislampiran)||"Eks"),[O,_]=(0,i.useState)(""),[J,K]=(0,i.useState)((null===r||void 0===r?void 0:r.divisi)||a),[M,q]=(0,i.useState)((null===r||void 0===r?void 0:r.berang)||"form1"),[H,X]=(0,i.useState)((null===r||void 0===r?void 0:r.isiSurat)||"Dengan Hormat"),[G,W]=(0,i.useState)("");(0,i.useEffect)((()=>{localStorage.setItem("dataSurat",JSON.stringify({kepada:c,perihal:h,ttdBy:g,tembusans:N,lampiran:D,jenislampiran:T,divisi:J,berang:M,ttdBys:s,isiSurat:H,signer:null===s||void 0===s?void 0:s.find((e=>e.employe_id===g)),tglSurat:(new Date).toISOString(),nomorSurat:`. . . /PEMA/${F((new Date).getMonth()+1)}/${(new Date).getFullYear()}`,draft:!0}))}),[c,h,g,N,D,T,J,M,s,H]);(0,i.useEffect)((()=>{l.get(`dapi/adm/signers/${J}`).then((e=>{d(e.data.data),p((null===r||void 0===r?void 0:r.ttdBy)||"")}))}),[J]),(0,i.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("dataSurat"));W(""),"form3"===M&&(""!==D&&""===O&&Number(D)>0?((0,R.Z)("error","Lampiran harus 0 jika tidak ada File"),q("form1")):setTimeout((async function(){try{const t=await B(e,n);A(t,O.replace("data:application/pdf;base64,","")).then((e=>{W(e)}))}catch(t){console.log(t)}}),1e3)),"form2"===M&&(""!==J&&""!==c&&""!==h&&""!==g||(q("form1"),(0,R.Z)("error","Silakan Lengkapi Data !!!")))}),[M]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{ref:n,style:{display:"none"},children:(0,$.jsx)(Z.QRCode,{value:`https://sys.ptpema.co.id/verification/${null===r||void 0===r?void 0:r.doc_number}`,size:400,qrStyle:"dots",logoImage:U,logoWidth:100,logoHeight:100,eyeRadius:20,fgColor:"#0F52BA"})}),"form1"===M?(0,$.jsxs)(b.Z,{className:"pe-4 ps-4 mt-5",children:[(null===t||void 0===t?void 0:t.length)>0&&(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsx)(y.Z,{select:!0,style:{width:"100%"},variant:"outlined",value:J,onChange:e=>K(e.target.value),label:"Pilih Divisi",children:null===t||void 0===t?void 0:t.map((e=>(0,$.jsx)(f.Z,{value:null===e||void 0===e?void 0:e.organization_id,children:null===e||void 0===e?void 0:e.organization_name},null===e||void 0===e?void 0:e.organization_id)))})}),(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsx)(y.Z,{id:"outlined-basic",style:{width:"100%"},label:"Surat ini Ditujukan Kepada",value:c,onChange:e=>u(e.target.value),variant:"outlined"})}),(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsx)(y.Z,{id:"outlined-basic",style:{width:"100%"},label:"Perihal Surat",value:h,onChange:e=>m(e.target.value),variant:"outlined"})}),(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsx)(y.Z,{select:!0,style:{width:"100%"},variant:"outlined",value:g,onChange:e=>p(e.target.value),label:"Ditandatangani Oleh",children:null===s||void 0===s?void 0:s.map((e=>(0,$.jsx)(f.Z,{value:null===e||void 0===e?void 0:e.employe_id,children:null===e||void 0===e?void 0:e.first_name},null===e||void 0===e?void 0:e.employe_id)))})}),(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsx)(y.Z,{type:"number",id:"outlined-basic",style:{width:"100%"},label:"Jumlah Lampiran",value:D,placeholder:"3",onChange:e=>L(e.target.value),variant:"outlined"})}),D>0?(0,$.jsxs)(b.Z,{className:"mb-3",children:[(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(y.Z,{id:"outlined-basic",style:{width:"80%"},label:"Jenis Lampiran",value:T,placeholder:"Dokumen",onChange:e=>z(e.target.value),variant:"outlined"}),(0,$.jsx)(o.Z,{color:"secondary",outline:!0,style:{width:"20%"},onClick:()=>document.getElementById("input-file").click(),children:O?"Ubah Lampiran":"Upload Lampiran"}),""===O&&""!==D?(0,$.jsx)("small",{className:"text-danger",children:"Silakan Upload File Lampiran dalam bentuk PDF dan tentukan jenis lampiran"}):""]}),(0,$.jsx)("input",{type:"file",id:"input-file",style:{display:"none"},accept:"application/pdf",onChange:e=>{I(e.target.files[0]).then((e=>{_(e)})).catch((e=>{console.log(e)}))}})]}):"",(0,$.jsx)(b.Z,{className:"mb-3",children:(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(o.Z,{style:{width:"10%"},onClick:()=>{""!==k&&(P([...N,k]),C(""))},children:"+"}),(0,$.jsx)(y.Z,{id:"outlined-basic",style:{width:"90%"},label:"Tembusan",value:k,placeholder:"PJ Gubernur Aceh",onChange:e=>C(e.target.value),variant:"outlined"})]})}),(null===N||void 0===N?void 0:N.length)>0?(0,$.jsxs)(b.Z,{sx:{p:2,borderRadius:1,border:"0.5px solid #C4C4C4"},className:"mb-3",children:["Tembusan :",(0,$.jsx)("ul",{children:null===N||void 0===N?void 0:N.map((e=>(0,$.jsxs)("li",{children:[" ",(0,$.jsx)(S.Z,{color:"danger",style:{cursor:"pointer"},onClick:()=>{return t=e,void P(N.filter((e=>e!==t)));var t},children:"Hapus"})," ",e]},e)))})]}):"",(0,$.jsx)(b.Z,{className:"mb-3 mt-5",style:{display:"flex"},children:(0,$.jsx)(o.Z,{style:{marginLeft:"auto"},color:"success",onClick:()=>q("form2"),children:"Selanjutnya"})})]}):"","form2"===M?(0,$.jsxs)(b.Z,{className:"pe-4 ps-4 mt-5",children:[""!==H&&(0,$.jsx)(x.M,{apiKey:"wsaajswvlat7i5hpef2b0yqpalytaz042xu9j0djrz6sbpwr",init:{height:500,plugins:["table","anchor","autolink","charmap","codesample","emoticons","image","link","advlist","lists","media","searchreplace","visualblocks","wordcount","code"],branding:!1,toolbar:"undo redo | bold italic underline strikethrough | tableCustom | table mergetags |superscript subscript | alignleft aligncenter alignright alignjustify | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat | code",setup:e=>{e.ui.registry.addButton("tableCustom",{icon:"fa fa-plus",tooltip:"Borderles Table",onAction:()=>{(e=>{e.insertContent('<table style="border-collapse: collapse; width: 100%; border: 0px;">\n          <tbody>\n          <tr>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 32.1429%;">Nama Acara</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 2.00348%;">:</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 65.8537%;">Presentasi Project Kopi</td>\n          </tr>\n          <tr>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 32.1429%;">Hari / Tanggal</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 2.00348%;">:</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 65.8537%;">Kamis, 16 Januari 1998</td>\n          </tr>\n          <tr>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 32.1429%;">Waktu</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 2.00348%;">:</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 65.8537%;">Jam 10:25 WIB</td>\n          </tr>\n          <tr>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 32.1429%;">Tempat Acara Kegiatan</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 2.00348%;">:</td>\n          <td style="vertical-align: top; border: 0px; line-height: 1.2; width: 65.8537%;">Kantor PT Pembangunan Aceh (PEMA)</td>\n          </tr>\n          </tbody>\n        </table>\n')})(e)}})}},value:H,onEditorChange:e=>X(""===e?" ":e.replace(/(<br\s*\/?>\s*)+<table/gi,"<table"))}),(0,$.jsx)(b.Z,{className:"mb-3 mt-5",style:{display:"flex"},children:(0,$.jsxs)(w.Z,{style:{marginLeft:"auto"},children:[(0,$.jsx)(o.Z,{color:"warning",onClick:()=>q("form1"),children:"Sebelumnya"}),(0,$.jsx)(o.Z,{color:"success",onClick:()=>q("form3"),children:"Selanjutnya"})]})})]}):"","form3"===M?(0,$.jsxs)(b.Z,{className:"pe-4 ps-4 mt-5",children:[""!==G?(0,$.jsx)("object",{data:`${G}#navpanes=0`,type:"application/pdf",width:"100%",height:"580",children:"Load"}):(0,$.jsx)(E.Z,{}),(0,$.jsx)(b.Z,{className:"mb-3 mt-5",style:{display:"flex"},children:(0,$.jsxs)(w.Z,{style:{marginLeft:"auto"},children:[(0,$.jsx)(o.Z,{color:"warning",onClick:()=>q("form2"),children:"Sebelumnya"}),(0,$.jsx)(o.Z,{color:"success",onClick:()=>(()=>{const e={...r,fileLampiran:O,type:"main"};l.post("dapi/adm/insert",e).then((e=>{console.log(null===e||void 0===e?void 0:e.data)}))})(),children:"Submit"})]})})]}):""]})},O=()=>{const e=(0,v.Z)(),t=JSON.parse(localStorage.getItem("formData")),[a,l]=(0,i.useState)("1"),[m,b]=(0,i.useState)((null===t||void 0===t?void 0:t.tulisForm)||!1),[y,x]=(0,i.useState)([]),[f,j]=(0,i.useState)("");(0,i.useEffect)((()=>{localStorage.setItem("formData",JSON.stringify({tulisForm:m}))}),[m]);const S=(0,h.h)({queries:[{queryKey:["divisi",0],queryFn:()=>e.get("dapi/adm/divisi").then((e=>e.data.data))}]});return(0,i.useEffect)((()=>{var e,t,a,i;x(null===(e=S[0].data)||void 0===e?void 0:e.other_divisis),j(null===(t=S[0].data)||void 0===t||null===(a=t.my_divisi)||void 0===a||null===(i=a.organization_id)||void 0===i?void 0:i.toString())}),[S]),(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(s.ZP,{value:a,children:[(0,$.jsx)(n.Z,{className:"mb-1",children:(0,$.jsxs)(d.Z,{onChange:(e,t)=>{l(t)},"aria-label":"lab API tabs example",vertical:"sm",variant:"scrollable",scrollButtons:"auto",children:[(0,$.jsx)(u.Z,{label:(0,$.jsxs)(p.Z,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,$.jsx)("strong",{children:"TULIS SURAT"})," \xa0\xa0"]}),value:"1"}),(0,$.jsx)(u.Z,{label:(0,$.jsxs)(p.Z,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,$.jsx)("strong",{children:"SURAT MASUK"})," \xa0\xa0"]}),value:"2"}),(0,$.jsx)(u.Z,{label:(0,$.jsxs)(p.Z,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,$.jsx)("strong",{children:"SURAT KELUAR"})," \xa0\xa0"]}),value:"3"}),(0,$.jsx)(u.Z,{label:(0,$.jsxs)(p.Z,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,$.jsx)("strong",{children:"PERLU PARAF"})," \xa0\xa0"]}),value:"4"}),(0,$.jsx)(u.Z,{label:(0,$.jsxs)(p.Z,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,$.jsx)("strong",{children:"PERLU TANDA TANGAN"})," \xa0\xa0"]}),value:"5"})]})}),(0,$.jsx)(c.Z,{value:"1",className:"ps-0 pe-0",children:(0,$.jsx)(n.Z,{children:(0,$.jsx)(r.Z,{children:m?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(g(),{icon:"close",className:"mb-3 float-end",style:{cursor:"pointer"},onClick:()=>b(!m)}),(0,$.jsx)(z,{divisis:y,mydivisi:f})]}):(0,$.jsx)(o.Z,{color:"primary",size:"lg",style:{width:"100%"},onClick:()=>b(!m),children:"Buat Surat Baru"})})})})]})})},_=()=>(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(l.Z,{}),(0,$.jsx)(O,{})]})}}]);
//# sourceMappingURL=8857.62fb79d9.chunk.js.map