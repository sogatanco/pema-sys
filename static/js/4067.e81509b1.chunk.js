(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[4067],{53097:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(65043),n=s(203),l=s(22345),i=s(49157),o=s(18353),a=s(35299),c=s(26259),d=s(12327),u=s(72679),h=s(89804),f=s(87426),p=s(55918),x=s.n(p),m=s(96316),b=s(35475),j=s(24807),v=s(66230),y=s(93397),g=s(29820),A=s(30342),w=s(82959),S=s(30757),N=(s(91343),s(46592),s(70579));const k=()=>{const{auth:e}=(0,A.A)(),[t,s]=(0,r.useState)(!1),[p,k]=(0,r.useState)(void 0),[C,O]=(0,r.useState)(),[_,E]=(0,r.useState)(),[P,R]=(0,r.useState)(!1),[Y,z]=(0,r.useState)(),[T,D]=(0,r.useState)(),F=(0,y.A)(),{isLoading:W,error:M,data:I,refetch:B}=(0,n.I)({queryKey:["inprogresstasks"],queryFn:()=>F.get("api/task/director/inprogress/list").then((e=>(z(e.data.project),e.data.data)))});(0,r.useEffect)((()=>{D(I)}),[I]);const L=e=>{s(!0),k(e)},q=async t=>{O(t),E(!0),await F.post("api/task/".concat(null===e||void 0===e?void 0:e.user.employe_id,"/").concat(t,"/favorite")).then((e=>{B(),(0,w.x)("success",e.data.message)})).catch((()=>{(0,w.x)("error","Something went wrong.")})),O(),E(!1)},J=["Director"],H=["Manager"];(0,r.useEffect)((()=>{null!==e&&void 0!==e&&e.user.roles.find((e=>J.includes(e)))&&R(!0)}),[e]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(l.A,{children:(0,N.jsx)(i.A,{className:"rounded-3",children:(0,N.jsxs)(o.A,{children:[(0,N.jsx)(a.A,{tag:"h4",children:(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:["Inprogress Tasks",(0,N.jsx)(b.N_,{to:"/",style:{textDecoration:"none"},children:(0,N.jsxs)(c.A,{size:"sm",color:"info",outline:!0,className:"d-flex align-items-center",children:[(0,N.jsx)(x(),{icon:"chevron_left"}),"Back to Dashboard"]})})]})}),W?"loading...":M?"Something went wrong.":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(l.A,{className:"bg-light-secondary my-auto p-2 rounded-3",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(l.A,{sm:"12 mb-2",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-2",children:[(0,N.jsxs)(c.A,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(x(),{icon:"filter_list",style:{fontSize:"12px"}}),"Sort"]}),(0,N.jsxs)(c.A,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(x(),{icon:"tune",style:{fontSize:"12px"}}),"Filters"]})]})}),(0,N.jsx)(l.A,{sm:"12",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-3 col-md-6 w-100",children:[(0,N.jsx)("div",{className:"w-100 position-relative",children:(0,N.jsx)(u.A,{type:"text",className:"rounded-3",bsSize:"md",placeholder:"Search task...",onChange:e=>(e=>{const t=I.filter((t=>t.task_title.toLowerCase().includes(e.toLowerCase())));D(t)})(e.target.value)})}),(null===e||void 0===e?void 0:e.user.roles.find((e=>H.includes(e))))&&(0,N.jsx)(m.XP,{document:(0,N.jsx)(v.A,{projectTitle:Y,data:I}),fileName:"Task Report - ".concat(null===Y||void 0===Y?void 0:Y.project_number," - ").concat(null===Y||void 0===Y?void 0:Y.division),style:{textDecoration:"none"},children:(0,N.jsx)(c.A,{type:"button",className:"btn btn-light-info text-info rounded-3 d-flex py-2",children:(0,N.jsx)(x(),{icon:"file_download",style:{fontSize:"18px"}})})})]})})]})}),(0,N.jsxs)(l.A,{sm:"12 overflow-auto",children:[(0,N.jsxs)("h6",{className:"fw-bold mt-3",children:["List of tasks from ",null===Y||void 0===Y?void 0:Y.division]}),(0,N.jsxs)("table",{className:"rounded-corners",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{width:"30",children:"#"}),(0,N.jsx)("th",{children:"Task title"}),(0,N.jsx)("th",{width:"",children:"Status"}),(0,N.jsx)("th",{children:"Progress"}),(0,N.jsx)("th",{width:"100",children:"PIC"}),P&&(0,N.jsx)("th",{width:"50"})]})}),(0,N.jsx)("tbody",{children:(null===T||void 0===T?void 0:T.length)>0?null===T||void 0===T?void 0:T.map(((e,t)=>{var s,n,l,i,o,a;return(0,N.jsxs)(r.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{children:[t+1,"."]}),(0,N.jsxs)("td",{style:{cursor:"pointer"},onClick:()=>L(e),children:[(0,N.jsx)("span",{style:{fontWeight:"600"},children:e.task_title}),(0,N.jsx)("br",{}),(0,N.jsxs)(h.A,{color:"light",className:"text-muted",children:[null===e||void 0===e||null===(s=e.subtasks)||void 0===s?void 0:s.length," subtask"]}),"  ",(0,N.jsxs)(h.A,{color:"light",className:"text-muted",children:[(0,N.jsx)(x(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:0===e.status?(0,N.jsx)(h.A,{color:"light",className:"text-dark",children:"To Do"}):1===e.status?(0,N.jsx)(h.A,{color:"warning",children:"In Progress"}):2===e.status?(0,N.jsx)(h.A,{color:"light",className:"text-dark",children:"Under Review"}):3===e.status?(0,N.jsx)(h.A,{color:"success",children:"Approved"}):(0,N.jsx)(h.A,{color:"danger",children:"Revision"})}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(n=e.task_progress)||void 0===n?void 0:n.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)("img",{id:"tooltip-".concat(e.id),src:g,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,N.jsx)(S.A,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(i=e.pics)||void 0===i?void 0:i.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",(null===e||void 0===e||null===(o=e.pics)||void 0===o?void 0:o.length)-2]})]})})}),P&&(0,N.jsx)("td",{className:"text-center",children:_&&C===e.task_id?(0,N.jsx)(f.A,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>q(e.task_id),children:(0,N.jsx)(x(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]}),(null===e||void 0===e||null===(a=e.subtasks)||void 0===a?void 0:a.length)>0&&e.subtasks.map((e=>{var t,s,n;return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{}),(0,N.jsxs)("td",{onClick:()=>L(e),style:{cursor:"pointer"},children:[e.task_title,(0,N.jsx)("br",{}),(0,N.jsxs)(h.A,{color:"light",className:"text-muted",children:[(0,N.jsx)(x(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:"-"}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-primary text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(t=e.task_progress)||void 0===t?void 0:t.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(s=e.pics)||void 0===s?void 0:s.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)("img",{id:"tooltip-".concat(e.id),src:g,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"},e.id),(0,N.jsx)(S.A,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),P&&(0,N.jsx)("td",{className:"text-center",children:_&&C===e.task_id?(0,N.jsx)(f.A,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>q(e.task_id),children:(0,N.jsx)(x(),{icon:"star",className:"".concat(e.isFavorite&&"is_favorite")})})})})]},e.task_id)}))]},e.task_id)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"5",align:"center",children:"Data not found."})})})]})]})]})]})})}),t&&(0,N.jsx)(j.A,{modal:t,setModal:s,toggle:()=>{s(!t)},task:p,mode:"activities"})]})}},66230:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(89379),n=s(65043),l=s(96316),i=s(70579);const o=l.vv.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:10,textAlign:"center"},text:{margin:10,fontSize:10,textAlign:"justify"},image:{marginVertical:4,marginHorizontal:15,width:50,height:50},header:{fontSize:10,marginBottom:5,textAlign:"left",color:"#3f3f3f",fontWeight:"bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},printAt:{position:"absolute",fontSize:8,bottom:30,left:35,right:0,textAlign:"left",color:"grey"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,color:"#3f3f3f"},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{marginTop:3,marginBottom:3,marginLeft:3,marginRight:3,fontSize:10}}),a=()=>{const e=new Date;return"".concat(e.toDateString(),", ").concat(e.toLocaleString().split(",")[1])},c=e=>{let{projectTitle:t,data:s}=e;return(0,i.jsx)(l.yo,{children:(0,i.jsxs)(l.YW,{style:(0,r.A)((0,r.A)({},o.body),{},{backgroundColor:"#fff"}),children:[(0,i.jsxs)(l.EY,{style:o.header,fixed:!0,children:["Project : ",null===t||void 0===t?void 0:t.project_name]}),(0,i.jsxs)(l.EY,{style:o.header,fixed:!0,children:["Partner : ",null===t||void 0===t?void 0:t.partner]}),(0,i.jsxs)(l.EY,{style:o.header,fixed:!0,children:["Division : ",null===t||void 0===t?void 0:t.division]}),(0,i.jsxs)(l.EY,{style:o.header,fixed:!0,children:["Phase : ",null===t||void 0===t?void 0:t.phase]}),(0,i.jsxs)(l.EY,{style:o.header,fixed:!0,children:["Schema : ","jo"===(null===t||void 0===t?void 0:t.schema)?"Join Operational":"Join Venture"]}),(0,i.jsxs)(l.Ss,{style:o.table,children:[(0,i.jsxs)(l.Ss,{style:o.tableRow,children:[(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"5%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"No."})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"35%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"Task Title"})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"Status"})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"Deadline"})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"30%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"PIC"})})]}),null===s||void 0===s?void 0:s.map(((e,t)=>{var s,a;return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)(l.Ss,{style:o.tableRow,children:[(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"5%"}),children:(0,i.jsx)(l.EY,{style:(0,r.A)((0,r.A)({},o.tableCell),{},{textAlign:"center"}),children:t+1})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"35%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:e.task_title})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:(0,r.A)((0,r.A)({},o.tableCell),{},{fontSize:"10px"}),children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Under review":3===e.status?"Approved":"Revision"})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:e.end_date})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"30%"}),children:null===(s=e.pics)||void 0===s?void 0:s.map((e=>(0,i.jsx)(l.EY,{style:o.tableCell,children:e.first_name},e.id)))})]}),null===(a=e.level_2)||void 0===a?void 0:a.map((e=>{var t;return(0,i.jsxs)(l.Ss,{style:o.tableRow,children:[(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"5%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"35%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:e.task_title})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:"-"})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"15%"}),children:(0,i.jsx)(l.EY,{style:o.tableCell,children:e.end_date})}),(0,i.jsx)(l.Ss,{style:(0,r.A)((0,r.A)({},o.tableCol),{},{width:"30%"}),children:null===(t=e.pics)||void 0===t?void 0:t.map((e=>(0,i.jsx)(l.EY,{style:o.tableCell,children:e.first_name},e.id)))})]},e.task_id)}))]},e.task_id)}))]}),(0,i.jsx)(l.EY,{style:o.pageNumber,render:e=>{let{pageNumber:t,totalPages:s}=e;return"".concat(t," / ").concat(s)}}),(0,i.jsx)(l.EY,{style:o.printAt,render:a})]})})}},35299:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var r=s(65043),n=s(65173),l=s.n(n),i=s(98139),o=s.n(i),a=s(96794),c=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)s=l[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)s=l[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}var h={className:l().string,cssModule:l().object,tag:a.Wx};function f(e){var t=e.className,s=e.cssModule,n=e.tag,l=void 0===n?"div":n,i=u(e,c),h=(0,a.qO)(o()(t,"card-title"),s);return r.createElement(l,d({},i,{className:h}))}f.propTypes=h;const p=f},6221:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(65043),n=s(65173),l=s.n(n),i=s(96794);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=["className","cssModule","tag","innerRef"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},c.apply(this,arguments)}function d(e,t){if(null==e)return{};var s,r,n=function(e,t){if(null==e)return{};var s,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)s=l[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)s=l[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function u(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=x(e);if(t){var n=x(this).constructor;s=Reflect.construct(r,arguments,n)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,s)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var m={children:l().node,tag:i.Wx,innerRef:l().oneOfType([l().object,l().func,l().string]),className:l().string,cssModule:l().object},b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(o,e);var t,s,n,l=f(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=l.call(this,e)).getRef=t.getRef.bind(p(t)),t.submit=t.submit.bind(p(t)),t}return t=o,(s=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.cssModule,n=e.tag,l=void 0===n?"form":n,o=e.innerRef,u=d(e,a),h=(0,i.qO)(t,s);return r.createElement(l,c({},u,{ref:o,className:h}))}}])&&u(t.prototype,s),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component);b.propTypes=m;const j=b},98396:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var r=s(65043),n=s(98139),l=s.n(n),i=s(42966),o=s(96794);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a.apply(this,arguments)}var c={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"};function d(e){var t=l()("tooltip-arrow",e.arrowClassName),s=l()("tooltip","show",e.popperClassName),n=l()("tooltip-inner",e.innerClassName),d=(0,o.Jc)(c,e);return r.createElement(i.A,a({},d,{arrowClassName:t,popperClassName:s,innerClassName:n}))}d.propTypes=i.t;const u=d},46592:()=>{},91343:()=>{},50477:()=>{}}]);
//# sourceMappingURL=4067.e81509b1.chunk.js.map