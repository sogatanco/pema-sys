"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[5530],{45530:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var s=t(89379),l=t(65043),n=t(88881),i=t(67073),o=t(73216),c=t(12327),r=t(22345),d=t(49157),h=t(26259),u=t(14701),m=t(33552),x=(t(38421),t(93397)),g=t(30342),j=t(70579);const p=()=>{var e,a,t;const s=(0,o.zy)(),i=new URLSearchParams(s.search).get("sleding"),[p,v]=(0,l.useState)(""),f=(0,n.MW)(),b=(0,x.A)(),A=(0,l.useRef)(null),{auth:w}=(0,g.A)(),[N,k]=(0,l.useState)(""),[y,M]=(0,l.useState)({lat:null,lng:null}),[S,C]=(0,l.useState)(!1),[I,P]=(0,l.useState)(""),[_,L]=(0,l.useState)([]),T=(new Date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),z=()=>{b.get("dapi/hr/office").then((e=>{var a,t,s,l,n,i,o,c;console.log(e),M({lat:parseFloat(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.office.latitude),lng:parseFloat(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.office.longitude)}),P(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.profil),L(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.absen)}))},B=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{let a;"1"===i?(a={lat:5.5556333,lng:95.325707},k("".concat(5.5556333,",",95.325707))):(a={lat:e.coords.latitude,lng:e.coords.longitude},k("".concat(e.coords.latitude,",").concat(e.coords.longitude))),setTimeout((()=>{((e,a)=>{const t=e.lat*Math.PI/180,s=a.lat*Math.PI/180,l=(a.lat-e.lat)*Math.PI/180,n=(a.lng-e.lng)*Math.PI/180,i=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t)*Math.cos(s)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3})(a,y)<=100?C(!0):(v(""),f.show("Lokasi Tidak Sesuai, coba lagi !",a.lng))}),1e3)}),(e=>{f.show("Error pada pengambilan lokasi: ",e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):f.show("Geolocation tidak didukung oleh browser ini.")};(0,l.useEffect)((()=>{z()}),[]);return(0,j.jsxs)("div",{className:"absen-container",children:[(0,j.jsx)("div",{className:"head bg-primary text-white py-5 px-3 w-100",children:(0,j.jsxs)(c.A,{className:"align-items-center",children:[(0,j.jsxs)(r.A,{children:[(0,j.jsxs)("h3",{className:"fs-4",children:["Halo, ",null===w||void 0===w||null===(e=w.user)||void 0===e?void 0:e.first_name]}),(0,j.jsx)("p",{children:(()=>{const e=(new Date).getHours();return e>=5&&e<12?"Selamat Pagi":e>=12&&e<15?"Selamat Siang":e>=15&&e<18?"Selamat Sore":"Selamat Malam"})()})]}),(0,j.jsx)(r.A,{className:"text-end",children:(0,j.jsx)("img",{src:""!==I?I:"https://cdn.idntimes.com/content-images/post/20230515/gambar-profil-wa-keren-41d3732660868cf4a36d801d1301f672.jpg",alt:"Profile",className:"profile-img"})})]})}),(0,j.jsxs)("div",{className:"bawah mt-n5",children:[(0,j.jsxs)(c.A,{className:"text-center",children:[(0,j.jsx)(r.A,{children:(0,j.jsxs)(d.A,{className:"p-2",children:[(0,j.jsx)("div",{className:"menu-item",children:"\ud83d\udd52"}),(0,j.jsx)("span",{className:"text-muted small",children:"Riwayat"})]})}),(0,j.jsx)(r.A,{children:(0,j.jsxs)(d.A,{className:"p-2",children:[(0,j.jsx)("div",{className:"menu-item",children:"\ud83d\udcc4"}),(0,j.jsx)("span",{className:"text-muted small",children:"Pengajuan"})]})}),(0,j.jsx)(r.A,{children:(0,j.jsxs)(d.A,{className:"p-2",children:[(0,j.jsx)("div",{className:"menu-item",children:"\ud83d\udcc6"}),(0,j.jsx)("span",{className:"text-muted small",children:"Cuti"})]})})]}),(0,j.jsxs)(d.A,{className:"p-3 mt-3",children:[(0,j.jsx)("span",{className:"small mb-4",children:T}),(0,j.jsxs)(c.A,{className:"d-flex align-items-center mb-3",children:[(0,j.jsx)(r.A,{children:(0,j.jsxs)("span",{className:"small",children:[(0,j.jsx)("strong",{children:null!==_&&void 0!==_&&_.time_in?"".concat(null===_||void 0===_||null===(a=_.time_in)||void 0===a?void 0:a.substring(0,5)," WIB\u2705"):"08:00 WIB"}),(0,j.jsx)("br",{}),"Actual Clock In"]})}),(0,j.jsx)(r.A,{children:(0,j.jsx)(h.A,{color:"warning",className:"w-100",outline:!0,onClick:()=>{v("in"),B()},children:"in"===p?"Loading . . . .":"Masuk \u279c"})})]}),(0,j.jsxs)(c.A,{className:"d-flex align-items-center mb-3",children:[(0,j.jsx)(r.A,{children:(0,j.jsxs)("span",{className:"small",children:[(0,j.jsx)("strong",{children:null!==_&&void 0!==_&&_.time_out?"".concat(null===_||void 0===_||null===(t=_.time_out)||void 0===t?void 0:t.substring(0,5)," WIB\u2705"):"17:30 WIB"}),(0,j.jsx)("br",{}),"Actual Clock Out"]})}),(0,j.jsx)(r.A,{children:(0,j.jsx)(h.A,{color:"info",className:"w-100",outline:!0,onClick:()=>{v("out"),B()},children:"out"===p?"Loading . . . .":"Pulang \u279c"})})]})]})]}),S&&(0,j.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#000",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,j.jsxs)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:[(0,j.jsx)(u.i,{ref:A,facingMode:"user",controls:!1,videoConstraints:{width:1080,height:1920,facingMode:"user"},style:{width:"100%",height:"100%",objectFit:"cover",zIndex:1}}),(0,j.jsx)(m.A,{style:{fontSize:32,color:"#000"}}),(0,j.jsx)("button",{type:"button",onClick:async()=>{const e=A.current.takePhoto();C(!1),await b.post("dapi/hr/clock_in",{poto:e,jenis:p,latlong:N}).then((e=>{console.log(e),f.show(e.data.message),v(""),z()}))},style:{position:"absolute",bottom:"80px",left:"50%",transform:"translateX(-50%)",width:"70px",height:"70px",borderRadius:"50%",backgroundColor:"#fff",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",border:"none",zIndex:2,cursor:"pointer"}})]})})]})},v=()=>{const e={position:n.Xq.BOTTOM_CENTER,timeout:5e3,offset:"10px",transition:n.bm.SCALE,containerStyle:{textTransform:"none"}};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(n.Kq,(0,s.A)((0,s.A)({template:i.A},e),{},{children:[(0,j.jsx)("link",{rel:"icon",href:"https://api.ptpema.co.id/adm/dokumentasi/absen.ico"}),(0,j.jsx)(p,{})]}))})}}}]);
//# sourceMappingURL=5530.bae9bbe1.chunk.js.map