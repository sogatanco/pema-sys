(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[585],{16581:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var r=s(72791),l=s(76807),i=s(39773),n=s(43464),o=s(49037),a=s(14448),d=s(19127),c=s(63009),u=s(8118),h=s(16354),x=s(4828),f=s(30690),p=s.n(f),m=s(46272),v=s(11087),b=s(74458),j=s(14097),y=s(48089),g=s(87681),w=s(17834),C=s(31043),k=s(21234),N=(s(42459),s(35754),s(80184));const O=()=>{const{auth:e}=(0,w.Z)(),[t,s]=(0,r.useState)(!1),[f,O]=(0,r.useState)(void 0),[S,_]=(0,r.useState)(),[Z,P]=(0,r.useState)(),[R,z]=(0,r.useState)(!1),[T,G]=(0,r.useState)(),[D,F]=(0,r.useState)(),$=(0,y.Z)(),{isLoading:E,error:M,data:A,refetch:B}=(0,l.a)({queryKey:["inprogresstasks"],queryFn:()=>$.get("api/task/director/inprogress/list").then((e=>(G(e.data.project),e.data.data)))});(0,r.useEffect)((()=>{F(A)}),[A]);const W=e=>{s(!0),O(e)},I=async t=>{_(t),P(!0),await $.post(`api/task/${null===e||void 0===e?void 0:e.user.employe_id}/${t}/favorite`).then((e=>{B(),(0,C.Z)("success",e.data.message)})).catch((()=>{(0,C.Z)("error","Something went wrong.")})),_(),P(!1)},L=["Director"],U=["Manager"];(0,r.useEffect)((()=>{null!==e&&void 0!==e&&e.user.roles.find((e=>L.includes(e)))&&z(!0)}),[e]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Z,{children:(0,N.jsx)(n.Z,{className:"rounded-3",children:(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(a.Z,{tag:"h4",children:(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:["Inprogress Tasks",(0,N.jsx)(v.rU,{to:"/",style:{textDecoration:"none"},children:(0,N.jsxs)(d.Z,{size:"sm",color:"info",outline:!0,className:"d-flex align-items-center",children:[(0,N.jsx)(p(),{icon:"chevron_left"}),"Back to Dashboard"]})})]})}),E?"loading...":M?"Something went wrong.":(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Z,{className:"bg-light-secondary my-auto p-2 rounded-3",children:(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(i.Z,{sm:"12 mb-2",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-2",children:[(0,N.jsxs)(d.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(p(),{icon:"filter_list",style:{fontSize:"12px"}}),"Sort"]}),(0,N.jsxs)(d.Z,{type:"button",className:"d-flex align-items-center gap-2 rounded-3",color:"light",size:"sm",children:[(0,N.jsx)(p(),{icon:"tune",style:{fontSize:"12px"}}),"Filters"]})]})}),(0,N.jsx)(i.Z,{sm:"12",md:"6",children:(0,N.jsxs)("div",{className:"d-flex gap-3 col-md-6 w-100",children:[(0,N.jsx)("div",{className:"w-100 position-relative",children:(0,N.jsx)(u.Z,{type:"text",className:"rounded-3",bsSize:"md",placeholder:"Search task...",onChange:e=>(e=>{const t=A.filter((t=>t.task_title.toLowerCase().includes(e.toLowerCase())));F(t)})(e.target.value)})}),(null===e||void 0===e?void 0:e.user.roles.find((e=>U.includes(e))))&&(0,N.jsx)(m.WD,{document:(0,N.jsx)(j.Z,{projectTitle:T,data:A}),fileName:`Task Report - ${null===T||void 0===T?void 0:T.project_number} - ${null===T||void 0===T?void 0:T.division}`,style:{textDecoration:"none"},children:(0,N.jsx)(d.Z,{type:"button",className:"btn btn-light-info text-info rounded-3 d-flex py-2",children:(0,N.jsx)(p(),{icon:"file_download",style:{fontSize:"18px"}})})})]})})]})}),(0,N.jsxs)(i.Z,{sm:"12 overflow-auto",children:[(0,N.jsxs)("h6",{className:"fw-bold mt-3",children:["List of tasks from ",null===T||void 0===T?void 0:T.division]}),(0,N.jsxs)("table",{className:"rounded-corners",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{width:"30",children:"#"}),(0,N.jsx)("th",{children:"Task title"}),(0,N.jsx)("th",{width:"",children:"Status"}),(0,N.jsx)("th",{children:"Progress"}),(0,N.jsx)("th",{width:"100",children:"PIC"}),R&&(0,N.jsx)("th",{width:"50"})]})}),(0,N.jsx)("tbody",{children:(null===D||void 0===D?void 0:D.length)>0?null===D||void 0===D?void 0:D.map(((e,t)=>{var s,l,i,n,o,a;return(0,N.jsxs)(r.Fragment,{children:[(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{children:[t+1,"."]}),(0,N.jsxs)("td",{style:{cursor:"pointer"},onClick:()=>W(e),children:[(0,N.jsx)("span",{style:{fontWeight:"600"},children:e.task_title}),(0,N.jsx)("br",{}),(0,N.jsxs)(h.Z,{color:"light",className:"text-muted",children:[null===e||void 0===e||null===(s=e.subtasks)||void 0===s?void 0:s.length," subtask"]}),"  ",(0,N.jsxs)(h.Z,{color:"light",className:"text-muted",children:[(0,N.jsx)(p(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:0===e.status?(0,N.jsx)(h.Z,{color:"light",className:"text-dark",children:"To Do"}):1===e.status?(0,N.jsx)(h.Z,{color:"warning",children:"In Progress"}):2===e.status?(0,N.jsx)(h.Z,{color:"light",className:"text-dark",children:"Under Review"}):3===e.status?(0,N.jsx)(h.Z,{color:"success",children:"Approved"}):(0,N.jsx)(h.Z,{color:"danger",children:"Revision"})}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-success text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(l=e.task_progress)||void 0===l?void 0:l.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(i=e.pics)||void 0===i?void 0:i.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)("img",{id:`tooltip-${e.id}`,src:g,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"}),(0,N.jsx)(k.Z,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(n=e.pics)||void 0===n?void 0:n.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",(null===e||void 0===e||null===(o=e.pics)||void 0===o?void 0:o.length)-2]})]})})}),R&&(0,N.jsx)("td",{className:"text-center",children:Z&&S===e.task_id?(0,N.jsx)(x.Z,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>I(e.task_id),children:(0,N.jsx)(p(),{icon:"star",className:`${e.isFavorite&&"is_favorite"}`})})})})]}),(null===e||void 0===e||null===(a=e.subtasks)||void 0===a?void 0:a.length)>0&&e.subtasks.map((e=>{var t,s,l;return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{}),(0,N.jsxs)("td",{onClick:()=>W(e),style:{cursor:"pointer"},children:[e.task_title,(0,N.jsx)("br",{}),(0,N.jsxs)(h.Z,{color:"light",className:"text-muted",children:[(0,N.jsx)(p(),{icon:"comment",style:{fontSize:"12px"}}),e.comments]})]}),(0,N.jsx)("td",{children:"-"}),(0,N.jsx)("td",{children:(0,N.jsxs)("span",{className:"badge bg-light-primary text-primary rounded-pill d-inline-block fw-bold",children:[null===e||void 0===e||null===(t=e.task_progress)||void 0===t?void 0:t.toFixed(),"%"]})}),(0,N.jsx)("td",{children:(0,N.jsx)("div",{className:"members",children:(0,N.jsxs)("div",{className:"members-item",children:[null===e||void 0===e||null===(s=e.pics)||void 0===s?void 0:s.map(((e,t)=>{var s;return t<2&&(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)("img",{id:`tooltip-${e.id}`,src:g,className:"ava-pic rounded-circle",alt:"avatar",width:"35",height:"35"},e.id),(0,N.jsx)(k.Z,{title:e.first_name,id:null===(s=e.id)||void 0===s?void 0:s.toString()})]},e.id)})),(null===e||void 0===e||null===(l=e.pics)||void 0===l?void 0:l.length)>2&&(0,N.jsxs)("div",{className:"member-plus bg-light-info text-info fw-bold",children:["+",e.pics.length-2]})]})})}),R&&(0,N.jsx)("td",{className:"text-center",children:Z&&S===e.task_id?(0,N.jsx)(x.Z,{size:"sm",color:"warning"}):(0,N.jsx)("abbr",{title:"Mark task",style:{textDecoration:"none"},children:(0,N.jsx)("button",{type:"button",className:"fav-btn",onClick:()=>I(e.task_id),children:(0,N.jsx)(p(),{icon:"star",className:`${e.isFavorite&&"is_favorite"}`})})})})]},e.task_id)}))]},e.task_id)})):(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"5",align:"center",children:"Data not found."})})})]})]})]})]})})}),t&&(0,N.jsx)(b.Z,{modal:t,setModal:s,toggle:()=>{s(!t)},task:f,mode:"activities"})]})}},14097:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(72791),l=s(46272),i=s(80184);const n=l.mM.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:10,textAlign:"center"},text:{margin:10,fontSize:10,textAlign:"justify"},image:{marginVertical:4,marginHorizontal:15,width:50,height:50},header:{fontSize:10,marginBottom:5,textAlign:"left",color:"#3f3f3f",fontWeight:"bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},printAt:{position:"absolute",fontSize:8,bottom:30,left:35,right:0,textAlign:"left",color:"grey"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,color:"#3f3f3f"},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tableCell:{marginTop:3,marginBottom:3,marginLeft:3,marginRight:3,fontSize:10}}),o=()=>{const e=new Date;return`${e.toDateString()}, ${e.toLocaleString().split(",")[1]}`},a=e=>{let{projectTitle:t,data:s}=e;return(0,i.jsx)(l.BB,{children:(0,i.jsxs)(l.T3,{style:{...n.body,backgroundColor:"#fff"},children:[(0,i.jsxs)(l.xv,{style:n.header,fixed:!0,children:["Project : ",null===t||void 0===t?void 0:t.project_name]}),(0,i.jsxs)(l.xv,{style:n.header,fixed:!0,children:["Partner : ",null===t||void 0===t?void 0:t.partner]}),(0,i.jsxs)(l.xv,{style:n.header,fixed:!0,children:["Division : ",null===t||void 0===t?void 0:t.division]}),(0,i.jsxs)(l.xv,{style:n.header,fixed:!0,children:["Phase : ",null===t||void 0===t?void 0:t.phase]}),(0,i.jsxs)(l.xv,{style:n.header,fixed:!0,children:["Schema : ","jo"===(null===t||void 0===t?void 0:t.schema)?"Join Operational":"Join Venture"]}),(0,i.jsxs)(l.G7,{style:n.table,children:[(0,i.jsxs)(l.G7,{style:n.tableRow,children:[(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"5%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"No."})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"35%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"Task Title"})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"Status"})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"Deadline"})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"30%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"PIC"})})]}),null===s||void 0===s?void 0:s.map(((e,t)=>{var s,o;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(l.G7,{style:n.tableRow,children:[(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"5%"},children:(0,i.jsx)(l.xv,{style:{...n.tableCell,textAlign:"center"},children:t+1})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"35%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:e.task_title})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:{...n.tableCell,fontSize:"10px"},children:0===e.status?"To do":1===e.status?"In progress":2===e.status?"Under review":3===e.status?"Approved":"Revision"})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:e.end_date})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"30%"},children:null===(s=e.pics)||void 0===s?void 0:s.map((e=>(0,i.jsx)(l.xv,{style:n.tableCell,children:e.first_name},e.id)))})]}),null===(o=e.level_2)||void 0===o?void 0:o.map((e=>{var t;return(0,i.jsxs)(l.G7,{style:n.tableRow,children:[(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"5%"},children:(0,i.jsx)(l.xv,{style:n.tableCell})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"35%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:e.task_title})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:"-"})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"15%"},children:(0,i.jsx)(l.xv,{style:n.tableCell,children:e.end_date})}),(0,i.jsx)(l.G7,{style:{...n.tableCol,width:"30%"},children:null===(t=e.pics)||void 0===t?void 0:t.map((e=>(0,i.jsx)(l.xv,{style:n.tableCell,children:e.first_name},e.id)))})]},e.task_id)}))]},e.task_id)}))]}),(0,i.jsx)(l.xv,{style:n.pageNumber,render:e=>{let{pageNumber:t,totalPages:s}=e;return`${t} / ${s}`}}),(0,i.jsx)(l.xv,{style:n.printAt,render:o})]})})}},14448:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var r=s(72791),l=s(52007),i=s.n(l),n=s(81694),o=s.n(n),a=s(9622),d=["className","cssModule","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var s,r,l=function(e,t){if(null==e)return{};var s,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||(l[s]=e[s]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}var h={className:i().string,cssModule:i().object,tag:a.iC};function x(e){var t=e.className,s=e.cssModule,l=e.tag,i=void 0===l?"div":l,n=u(e,d),h=(0,a.mx)(o()(t,"card-title"),s);return r.createElement(i,c({},n,{className:h}))}x.propTypes=h;const f=x},69399:(e,t,s)=>{"use strict";s.d(t,{Z:()=>b});var r=s(72791),l=s(52007),i=s.n(l),n=s(9622);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=["className","cssModule","tag","innerRef"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function c(e,t){if(null==e)return{};var s,r,l=function(e,t){if(null==e)return{};var s,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||(l[s]=e[s]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}function u(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=p(e);if(t){var l=p(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,s)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m={children:i().node,tag:n.iC,innerRef:i().oneOfType([i().object,i().func,i().string]),className:i().string,cssModule:i().object},v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(o,e);var t,s,l,i=x(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).getRef=t.getRef.bind(f(t)),t.submit=t.submit.bind(f(t)),t}return t=o,(s=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var e=this.props,t=e.className,s=e.cssModule,l=e.tag,i=void 0===l?"form":l,o=e.innerRef,u=c(e,a),h=(0,n.mx)(t,s);return r.createElement(i,d({},u,{ref:o,className:h}))}}])&&u(t.prototype,s),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.Component);v.propTypes=m;const b=v},20311:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(72791),l=s(81694),i=s.n(l),n=s(82122);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},o.apply(this,arguments)}function a(e){var t=i()("tooltip-arrow",e.arrowClassName),s=i()("tooltip","show",e.popperClassName),l=i()("tooltip-inner",e.innerClassName);return r.createElement(n.Z,o({},e,{arrowClassName:t,popperClassName:s,innerClassName:l}))}a.propTypes=n.i,a.defaultProps={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"};const d=a},35754:()=>{},42459:()=>{},42480:()=>{}}]);
//# sourceMappingURL=585.c66e6472.chunk.js.map