"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[2940],{82959:(e,a,n)=>{n.d(a,{x:()=>i,y:()=>l});n(65043);var s=n(23768),t=n(70579);const l=()=>(0,t.jsx)(s.l$,{toastOptions:{className:"",style:{}}}),i=(e,a)=>{((e,a)=>{"success"===e?s.Ay.success(a):"create"===e?(0,s.Ay)(a,{icon:"\ud83e\udd17"}):"start"===e?(0,s.Ay)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,s.Ay)("Horeee, task done!",{icon:"\ud83d\udc4f"}):s.Ay.error(a)})(e,a)}},77199:(e,a,n)=>{n.d(a,{A:()=>d});var s=n(55510),t=n(28249),l=n(73216),i=n(35475),r=n(70579);const d=()=>{const e=(0,l.zy)(),a=e.pathname.split("/")[1],n=e.pathname.split("/")[2];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{className:"text-capitalize",children:"".concat(n||a)}),(0,r.jsxs)(s.A,{children:[(0,r.jsx)(t.A,{to:"/",tag:i.N_,className:"text-decoration-none",children:"Home"}),a?(0,r.jsx)(t.A,{active:!0,children:a}):"",n?(0,r.jsx)(t.A,{active:!0,children:n}):""]})]})}},60375:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Q});var s=n(65043),t=n(73216),l=n(49157),i=n(22016),r=n(15710),d=n(86506),c=n(24056),o=n(93933),h=n(203),m=n(59781),u=n(93397),x=n(77199),j=n(89379),p=n(18353),g=n(12327),b=n(22345),y=n(22019),v=n(70579);const N={chart:{toolbar:{show:!1},fontFamily:"'Poppins', sans-serif"},dataLabels:{enabled:!1},colors:["rgba(255,255,255,0.5)"],xaxis:{categories:["0","4","8","12","16","20","24","30"],labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},stroke:{curve:"smooth",width:3,colors:"rgba(255, 255, 255, 0.5)"},yaxis:{show:!1},grid:{show:!1},tooltip:{enabled:!1,theme:"dark"}},f=[{name:"Bandwidth usage",data:[5,0,12,1,8,3,12,15]}],A={chart:{fontFamily:"'Rubik', sans-serif"},dataLabels:{enabled:!1},xaxis:{categories:["Permohonan Biaya","Tagihan Biaya","Aktual Biaya","Reimbursement"],labels:{show:!1}},plotOptions:{bar:{distributed:!0,horizontal:!1}},grid:{borderColor:"rgba(0,0,0,0.1)"},yaxis:{labels:{style:{cssClass:"grey--text lighten-2--text fill-color"}}},title:{text:"Grafik Pengajuan Tahun ".concat((new Date).getFullYear()),align:"left",style:{fontSize:"16px",color:"#6c757d"}},tooltip:{theme:"dark"}},w=e=>{let{diproses:a,selesai:n,totalPengajuan:s,dataChart:t}=e;const i=["Permohonan Biaya","Tagihan Biaya","Aktual Biaya","Reimbursement"],r=[{name:"Pengajuan",data:null===i||void 0===i?void 0:i.map((e=>{const a=null===t||void 0===t?void 0:t.find((a=>a.kategori===e));return a?a.total:0}))}];return(0,v.jsx)("div",{children:(0,v.jsx)(l.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsxs)(g.A,{children:[(0,v.jsx)(b.A,{md:4,className:"mt-3",children:(0,v.jsx)(l.A,{className:"bg-warning",children:(0,v.jsxs)(p.A,{children:[(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)("div",{className:"me-3 align-self-center",children:(0,v.jsx)("h1",{className:"text-dark-white",children:(0,v.jsx)("i",{className:"bi bi-pie-chart"})})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-dark-white",children:"Pengajuan Diproses"}),(0,v.jsxs)("h6",{className:"text-dark-white",children:["Tahun ",(new Date).getFullYear()]})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(b.A,{xs:5,className:"d-flex align-items-center",children:(0,v.jsx)("h1",{className:"text-dark-white text-truncate mb-0",children:a})}),(0,v.jsx)(b.A,{xs:7,className:"align-self-center",children:(0,v.jsx)("div",{className:"d-flex align-items-center",style:{height:"105px"},children:(0,v.jsx)(y.A,{options:N,series:f,type:"scatter",height:"120"})})})]})]})})}),(0,v.jsx)(b.A,{md:4,className:"mt-3",children:(0,v.jsx)(l.A,{className:"bg-success",children:(0,v.jsxs)(p.A,{children:[(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)("div",{className:"me-3 align-self-center",children:(0,v.jsx)("h1",{className:"text-dark-white",children:(0,v.jsx)("i",{className:"bi bi-pie-chart"})})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-dark-white",children:"Pengajuan Selesai"}),(0,v.jsxs)("h6",{className:"text-dark-white",children:["Tahun ",(new Date).getFullYear()]})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(b.A,{xs:5,className:"d-flex align-items-center",children:(0,v.jsx)("h1",{className:"text-dark-white text-truncate mb-0",children:n})}),(0,v.jsx)(b.A,{xs:7,className:"align-self-center",children:(0,v.jsx)("div",{className:"d-flex align-items-center",style:{height:"105px"},children:(0,v.jsx)(y.A,{options:N,series:f,type:"area",height:"120"})})})]})]})})}),(0,v.jsx)(b.A,{md:4,className:"mt-3",children:(0,v.jsx)(l.A,{className:"bg-info",children:(0,v.jsxs)(p.A,{children:[(0,v.jsxs)("div",{className:"d-flex",children:[(0,v.jsx)("div",{className:"me-3 align-self-center",children:(0,v.jsx)("h1",{className:"text-dark-white",children:(0,v.jsx)("i",{className:"bi bi-pie-chart"})})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-dark-white",children:"Total Pengajuan"}),(0,v.jsxs)("h6",{className:"text-dark-white",children:["Tahun ",(new Date).getFullYear()]})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(b.A,{xs:5,className:"d-flex align-items-center",children:(0,v.jsx)("h1",{className:"text-dark-white text-truncate mb-0",children:s})}),(0,v.jsx)(b.A,{xs:7,className:"align-self-center",children:(0,v.jsx)("div",{className:"d-flex align-items-center",style:{height:"105px"},children:(0,v.jsx)(y.A,{options:N,series:f,type:"line",height:"120"})})})]})]})})})]}),(0,v.jsx)(g.A,{className:"mt-4",children:(0,v.jsx)(b.A,{md:8,children:(0,v.jsx)(y.A,{options:(0,j.A)((0,j.A)({},A),{},{xaxis:{categories:i}}),series:r,type:"bar",height:"500"})})})]})})})};var k=n(3655),_=n(26259),D=n(7493),S=n(87426),P=n(23222),I=n(10591),B=n(20782),C=n(98268),F=n(64911),L=n(97877),J=n(55918),R=n.n(J),T=n(58786),z=n(24858),q=n(82959);const E=()=>{const e=(0,u.A)(),[a,n]=(0,s.useState)(!1),[t,i]=(0,s.useState)(!1),[r,d]=(0,s.useState)(""),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[f,A]=(0,s.useState)(null),[w,J]=(0,s.useState)(null),[E,K]=(0,s.useState)(!1),{register:O,handleSubmit:U,reset:M,control:H,setValue:G,watch:Y,formState:{errors:V}}=(0,z.mN)({defaultValues:{items:[{itemName:"",quantity:"",unit:"",price:"",description:""}]}}),{fields:Q,append:$,remove:W}=(0,z.jz)({control:H,name:"items"}),{data:X,isLoading:Z,error:ee,refetch:ae}=(0,h.I)({queryKey:["pengajuan-list"],queryFn:()=>e.get("api/pengajuan").then((e=>(console.log(e),e.data.data)))});(0,s.useEffect)((()=>{o(X||[])}),[X]),(0,s.useEffect)((()=>{o(r?null===X||void 0===X?void 0:X.filter((e=>e.sub_pengajuan[0].nama_item.toLowerCase().includes(r.toLowerCase()))):X)}),[r]);const ne=()=>{M(),K(!1),n(!1)};function se(e){if(!e)return"Rp 0";const a=e.toString().replace(/[^,\d]/g,"").split(","),n=a[0].length%3;let s=a[0].substr(0,n);const t=a[0].substr(n).match(/\d{3}/g);if(t){s+="".concat(n?".":"").concat(t.join("."))}return"Rp ".concat(s)}const te=[{name:"Aksi",selector:a=>{var s;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_.A,{color:"danger",outline:!0,size:"sm",className:"me-2",onClick:()=>(e=>{K(!0),n(!0),G("id",e.id),G("jenis_permohonan",e.pengajuan),G("documentNumber",e.no_dokumen),W(),e.sub_pengajuan&&e.sub_pengajuan.length>0&&e.sub_pengajuan.forEach((e=>{$({itemName:e.nama_item,quantity:e.jumlah,unit:e.satuan,price:se(e.biaya_satuan),description:e.keterangan})}))})(a),disabled:!(null!==a&&void 0!==a&&null!==(s=a.approvals)&&void 0!==s&&s.every((e=>{var n;return null===e.status||(null===a||void 0===a||null===(n=a.approvals)||void 0===n?void 0:n.some((e=>"0"===e.status)))}))),children:"Update"}),(0,v.jsx)(_.A,{color:"secondary",outline:!0,size:"sm",className:"me-2",onClick:()=>(async a=>{await e.get("api/pengajuan/".concat(a.id,"/show")).then((e=>{console.log("res",e),J(e.data.data),x(!0)})).catch((e=>{console.log(e),(0,q.x)("error","Terjadi Kesalahan")}))})(a),children:"Approval"}),(0,v.jsx)(_.A,{outline:!0,size:"sm",color:"info",onClick:()=>(a=>{A({row:a,title:"Detail Pengajuan",body:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(g.A,{children:[(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Jenis Permohonan : "}),(0,v.jsx)("p",{children:a.pengajuan})]}),(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"No Dokumen : "}),(0,v.jsx)("p",{children:a.no_dokumen})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Tanggal Pengajuan : "}),(0,v.jsx)("p",{children:new Date(a.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Lampiran : "}),(0,v.jsx)("p",{children:(0,v.jsx)("a",{href:"".concat(e.defaults.baseURL,"/pengajuan/").concat(a.lampiran),target:"_blank",rel:"noopener noreferrer",className:"btn btn-info btn-sm",children:"Lihat Lampiran"})})]})]}),(0,v.jsx)(g.A,{children:(0,v.jsx)(b.A,{children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)(k.A,{bordered:!0,responsive:!0,hover:!0,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"text-center",style:{width:"50px"},children:"No"}),(0,v.jsx)("th",{children:"Nama Barang/Jasa"}),(0,v.jsx)("th",{children:"Jumlah"}),(0,v.jsx)("th",{children:"Satuan"}),(0,v.jsx)("th",{children:"Biaya Satuan"}),(0,v.jsx)("th",{children:"Total Biaya"}),(0,v.jsx)("th",{children:"Keterangan"})]})}),(0,v.jsxs)("tbody",{children:[a.sub_pengajuan.map(((e,a)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"text-center",children:a+1}),(0,v.jsx)("td",{style:{whiteSpace:"pre-wrap"},children:e.nama_item}),(0,v.jsx)("td",{children:e.jumlah}),(0,v.jsx)("td",{children:e.satuan}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.biaya_satuan)}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total_biaya)}),(0,v.jsx)("td",{children:e.keterangan||"-"})]},e.id))),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{colSpan:5,className:"text-end fw-bold",children:"Total Biaya Keseluruhan"}),(0,v.jsx)("td",{colSpan:2,children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a.sub_pengajuan.reduce(((e,a)=>e+a.total_biaya),0))})]})]})]})})})})]})}),N(!0)})(a),children:"Detail"})]})},width:"300px"},{name:"Status",selector:e=>{var a,n;return(0,v.jsx)(v.Fragment,{children:null!==e&&void 0!==e&&null!==(a=e.approvals)&&void 0!==a&&a.every((e=>"1"===e.status))?(0,v.jsx)("span",{className:"badge bg-success rounded-pill",children:"Approved"}):null!==e&&void 0!==e&&null!==(n=e.approvals)&&void 0!==n&&n.some((e=>"0"===e.status))?(0,v.jsx)("span",{className:"badge bg-danger rounded-pill",children:"Rejected"}):(0,v.jsx)("span",{className:"badge bg-secondary rounded-pill",children:"Pending"})})}},{name:"Tanggal Pengajuan",selector:e=>new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),width:"200px"},{name:"Jenis Permohonan",selector:e=>e.pengajuan},{name:"No Dokumen",selector:e=>e.no_dokumen,width:"200px"},{name:"Nama Barang/Jasa",selector:e=>e.sub_pengajuan[0].nama_item},{name:"Jumlah Barang/Jasa",selector:e=>e.sub_pengajuan[0].jumlah},{name:"Satuan",selector:e=>e.sub_pengajuan[0].satuan},{name:"Biaya Satuan",selector:e=>(0,v.jsx)("div",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.sub_pengajuan[0].biaya_satuan)})}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{children:(0,v.jsxs)(p.A,{children:[!a&&(0,v.jsx)("div",{className:"d-grid gap-2",children:(0,v.jsx)(_.A,{size:"lg",color:"primary",onClick:async e=>{e.preventDefault(),n(!0)},children:"Tambah Permohonan"})}),a&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,v.jsx)(R(),{icon:"close",onClick:ne,style:{cursor:"pointer"}})}),(0,v.jsxs)("form",{onSubmit:U(E?async a=>{console.log("Data Submit",a),i(!0);const n=a.items.map((e=>(0,j.A)((0,j.A)({},e),{},{price:Number(e.price.replace(/[^\d]/g,""))}))),s=new FormData;s.append("id",a.id),s.append("jenis_permohonan",a.jenis_permohonan),s.append("no_dokumen",a.documentNumber),a.file&&a.file[0]&&s.append("lampiran",a.file[0]),s.append("items",JSON.stringify(n)),await e.post("api/pengajuan/".concat(a.id,"/update"),s).then((e=>{ae(),console.log(e),i(!1),ne(),M(),(0,q.x)("success","Pengajuan Berhasil Diupdate")})).catch((e=>{console.log(e),i(!1),(0,q.x)("error","Terjadi Kesalahan")}))}:async a=>{console.log("Data Submit",a),i(!0);const n=a.items.map((e=>(0,j.A)((0,j.A)({},e),{},{price:Number(e.price.replace(/[^\d]/g,""))}))),s=new FormData;s.append("jenis_permohonan",a.jenis_permohonan),s.append("no_dokumen",a.documentNumber),s.append("lampiran",a.file[0]),s.append("items",JSON.stringify(n)),await e.post("api/pengajuan",s).then((e=>{console.log("res",e),i(!1),ae(),ne(),M(),(0,q.x)("success","Pengajuan Berhasil Ditambahkan")})).catch((e=>{console.log(e),i(!1),(0,q.x)("error","Terjadi Kesalahan")}))}),children:[E&&(0,v.jsx)("input",(0,j.A)((0,j.A)({type:"hidden"},O("id")),{},{required:!0})),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-md-6",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)(D.A,{children:"Jenis Permohonan"}),(0,v.jsxs)("select",(0,j.A)((0,j.A)({className:"form-control ".concat(V.jenis_permohonan?"is-invalid":"")},O("jenis_permohonan",{required:"Jenis Permohonan wajib diisi",onChange:e=>{return a=e.target.value,void G("documentNumber","Permohonan Biaya"===a?"FPR-UM-PEMA-01-04":"Reimbursement"===a?"FPR-UM-PEMA-01-02":"Tagihan Biaya"===a?"FPR-UM-PEMA-01-03":"Aktual Biaya"===a?"FPR-UM-PEMA-04-02":"");var a}})),{},{children:[(0,v.jsx)("option",{value:"",children:"Pilih Permohonan"}),(0,v.jsx)("option",{value:"Permohonan Biaya",children:"Permohonan Biaya"}),(0,v.jsx)("option",{value:"Reimbursement",children:"Reimbursement"}),(0,v.jsx)("option",{value:"Tagihan Biaya",children:"Tagihan Biaya"}),(0,v.jsx)("option",{value:"Aktual Biaya",children:"Aktual Biaya"})]})),V.jenis_permohonan&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.jenis_permohonan.message})]})}),(0,v.jsx)("div",{className:"col-md-6",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)(D.A,{children:"No Dokumen"}),(0,v.jsx)("input",(0,j.A)({type:"text",className:"form-control ".concat(V.documentNumber?"is-invalid":""),placeholder:"No Dokumen"},O("documentNumber",{required:"No Dokumen wajib diisi"}))),V.documentNumber&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.documentNumber.message})]})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-12",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)(D.A,{children:"Lampiran"}),(0,v.jsx)("input",(0,j.A)({type:"file",accept:".pdf",className:"form-control ".concat(V.file?"is-invalid":""),placeholder:"Lampiran"},O("file",{required:!E&&"Lampiran wajib diisi"}))),(0,v.jsx)("span",{className:"text-primary",children:"Hanya menerima file PDF"}),V.file&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.file.message})]})})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-md-12",children:(0,v.jsxs)("div",{className:"table-responsive",children:[(0,v.jsxs)("table",{className:"table table-bordered",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{style:{width:"300px"},children:"Nama Barang/Jasa"}),(0,v.jsx)("th",{style:{width:"150px"},children:"Jumlah"}),(0,v.jsx)("th",{style:{width:"200px"},children:"Satuan"}),(0,v.jsx)("th",{style:{width:"200px"},children:"Harga Satuan"}),(0,v.jsx)("th",{children:"Keterangan"}),(0,v.jsx)("th",{style:{width:"50px"},children:"Aksi"})]})}),(0,v.jsx)("tbody",{children:Q.map(((e,a)=>{var n,s,t,l,i,r,d,c,o,h,m,u,x,p,g,b;return(0,v.jsxs)("tr",{children:[(0,v.jsxs)("td",{children:[(0,v.jsx)("textarea",(0,j.A)({className:"form-control ".concat(null!==(n=V.items)&&void 0!==n&&null!==(s=n[a])&&void 0!==s&&s.itemName?"is-invalid":""),placeholder:"Nama Barang/Jasa"},O("items.".concat(a,".itemName"),{required:"Nama Barang/Jasa wajib diisi"}))),(null===(t=V.items)||void 0===t||null===(l=t[a])||void 0===l?void 0:l.itemName)&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.items[a].itemName.message})]}),(0,v.jsxs)("td",{children:[(0,v.jsx)("input",(0,j.A)({type:"number",className:"form-control ".concat(null!==(i=V.items)&&void 0!==i&&null!==(r=i[a])&&void 0!==r&&r.quantity?"is-invalid":""),placeholder:"Jumlah"},O("items.".concat(a,".quantity"),{required:"Jumlah wajib diisi"}))),(null===(d=V.items)||void 0===d||null===(c=d[a])||void 0===c?void 0:c.quantity)&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.items[a].quantity.message})]}),(0,v.jsxs)("td",{children:[(0,v.jsx)("input",(0,j.A)({type:"text",className:"form-control ".concat(null!==(o=V.items)&&void 0!==o&&null!==(h=o[a])&&void 0!==h&&h.unit?"is-invalid":""),placeholder:"Paket/Bulan/Kg/Unit, dll"},O("items.".concat(a,".unit"),{required:"Satuan wajib diisi"}))),(null===(m=V.items)||void 0===m||null===(u=m[a])||void 0===u?void 0:u.unit)&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.items[a].unit.message})]}),(0,v.jsxs)("td",{children:[(0,v.jsx)("input",(0,j.A)((0,j.A)({type:"text",className:"form-control ".concat(null!==(x=V.items)&&void 0!==x&&null!==(p=x[a])&&void 0!==p&&p.price?"is-invalid":""),placeholder:"Harga Satuan",value:se(Y("items.".concat(a,".price"))||"")},O("items.".concat(a,".price"),{required:"Harga Satuan wajib diisi",validate:e=>{const a=e.replace(/[^\d]/g,"");return a?!(a<=0)||"Harga Satuan tidak boleh kurang dari atau sama dengan 0":"Harga Satuan wajib berupa angka"},onChange:e=>{const a=e.target.value.replace(/[^\d]/g,"");e.target.value=a}})),{},{autoComplete:"off"})),(null===(g=V.items)||void 0===g||null===(b=g[a])||void 0===b?void 0:b.price)&&(0,v.jsx)("div",{className:"invalid-feedback",children:V.items[a].price.message})]}),(0,v.jsx)("td",{children:(0,v.jsx)("textarea",(0,j.A)({className:"form-control",placeholder:"Keterangan"},O("items.".concat(a,".description"))))}),(0,v.jsx)("td",{children:a>0&&(0,v.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>W(a),children:(0,v.jsx)(R(),{icon:"delete",fontSize:"17"})})})]},e.id)}))})]}),(0,v.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>$({itemName:"",quantity:"",unit:"",price:"",description:""}),children:"Tambah Barang/Jasa"})]})})}),(0,v.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,v.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S.A,{color:"light",size:"sm",className:"me-1"})," Loading"]}):(0,v.jsx)(v.Fragment,{children:E?"Update":"Submit"})})})]})]})]})}),!a&&(0,v.jsx)(l.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsx)("div",{className:"mb-3 d-flex align-items-center justify-content-end",children:(0,v.jsx)("input",{type:"text",className:"form-control w-25",placeholder:"Cari...",value:r,onChange:e=>d(e.target.value)})}),Z?(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)(S.A,{color:"primary",size:"sm",className:"me-2"})," Sedang Mengambil Data"]}):ee?(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)("span",{className:"text-danger",children:"Something went wrong"})}):(0,v.jsx)(T.Ay,{columns:te,data:c,pagination:!0,highlightOnHover:!0,responsive:!0,striped:!0})]})}),(0,v.jsxs)(P.A,{isOpen:m,toggle:()=>x(!m),children:[(0,v.jsx)(I.A,{toggle:()=>x(!m),children:"Approval Pengajuan"}),(0,v.jsx)(B.A,{children:w&&(0,v.jsx)(C.A,{flush:!0,children:w.map(((e,a)=>(0,v.jsxs)(F.A,{className:"d-flex justify-content-between align-items-start flex-column",children:[(0,v.jsxs)("div",{className:"w-100 d-flex justify-content-between align-items-center",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h6",{className:"mb-1",children:[(0,v.jsxs)("strong",{children:[a+1,"."]})," ",e.employe_id," - ",e.full_name]}),(0,v.jsx)("small",{className:"text-muted",children:e.position_name})]}),"1"===(null===e||void 0===e?void 0:e.status)?(0,v.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[(0,v.jsx)("span",{className:"badge bg-success rounded-pill",children:"Approved"}),(0,v.jsx)("small",{className:"text-muted",children:new Date(null===e||void 0===e?void 0:e.updated_at).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}):"0"===(null===e||void 0===e?void 0:e.status)?(0,v.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[(0,v.jsx)("span",{className:"badge bg-danger rounded-pill",children:"Rejected"}),(0,v.jsx)("small",{className:"text-muted",children:new Date(null===e||void 0===e?void 0:e.updated_at).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}):(0,v.jsx)("div",{className:"d-flex flex-column align-items-end",children:(0,v.jsx)("span",{className:"badge bg-secondary rounded-pill",children:"Pending"})})]}),"0"===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.keterangan)&&(0,v.jsx)("div",{className:"mt-2 w-100",children:(0,v.jsxs)("small",{children:[(0,v.jsx)("strong",{children:"Alasan Penolakan:"})," ",(0,v.jsx)("br",{}),e.keterangan]})})]})))})}),(0,v.jsx)(L.A,{children:(0,v.jsx)(_.A,{color:"secondary",onClick:()=>x(!1),children:"Tutup"})})]}),(0,v.jsxs)(P.A,{isOpen:y,toggle:()=>N(!y),size:"xl",children:[(0,v.jsx)(I.A,{toggle:()=>N(!y),children:"Detail Pengajuan"}),(0,v.jsx)(B.A,{children:null===f||void 0===f?void 0:f.body}),(0,v.jsx)(L.A,{children:(0,v.jsx)(_.A,{color:"secondary",onClick:()=>N(!1),children:"Tutup"})})]})]})};n(94727);const K=e=>{let{setBadgeCount:a}=e;const n=(0,u.A)(),[t,i]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[x,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[f,A]=(0,s.useState)(""),[w,C]=(0,s.useState)(!1),[F,J]=(0,s.useState)(""),R=(0,m.jE)(),z=()=>{d(!r),A(""),C(!1)},{data:E,isLoading:K,error:O,refetch:U}=(0,h.I)({queryKey:["approval-pengajuan-all"],queryFn:()=>n.get("api/pengajuan-approval").then((e=>e.data.data))});(0,s.useEffect)((()=>{i(E||[]),E&&(a(E.length),R.invalidateQueries(["dashboard-pengajuan"]))}),[E,a]),(0,s.useEffect)((()=>{i(F?null===E||void 0===E?void 0:E.filter((e=>e.sub_pengajuan[0].nama_item.toLowerCase().includes(F.toLowerCase()))):E)}),[F]);const M=[{name:"Aksi",selector:e=>(0,v.jsx)(_.A,{color:"primary",outline:!0,size:"sm",className:"me-2",onClick:()=>(e=>{o({row:e,title:"Detail Pengajuan",body:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(g.A,{children:[(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Jenis Permohonan : "}),(0,v.jsx)("p",{children:e.pengajuan})]}),(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"No Dokumen : "}),(0,v.jsx)("p",{children:e.no_dokumen})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Tanggal Pengajuan : "}),(0,v.jsx)("p",{children:new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,v.jsxs)(b.A,{md:6,children:[(0,v.jsx)("p",{className:"fw-bold",children:"Lampiran : "}),(0,v.jsx)("p",{children:(0,v.jsx)("a",{href:"".concat(n.defaults.baseURL,"/pengajuan/").concat(e.lampiran),target:"_blank",rel:"noopener noreferrer",className:"btn btn-info btn-sm",children:"Lihat Lampiran"})})]})]}),(0,v.jsx)(g.A,{children:(0,v.jsx)(b.A,{children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)(k.A,{bordered:!0,responsive:!0,hover:!0,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"text-center",style:{width:"50px"},children:"No"}),(0,v.jsx)("th",{children:"Nama Barang/Jasa"}),(0,v.jsx)("th",{children:"Jumlah"}),(0,v.jsx)("th",{children:"Satuan"}),(0,v.jsx)("th",{children:"Biaya Satuan"}),(0,v.jsx)("th",{children:"Total Biaya"}),(0,v.jsx)("th",{children:"Keterangan"})]})}),(0,v.jsxs)("tbody",{children:[e.sub_pengajuan.map(((e,a)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"text-center",children:a+1}),(0,v.jsx)("td",{style:{whiteSpace:"pre-wrap"},children:e.nama_item}),(0,v.jsx)("td",{children:e.jumlah}),(0,v.jsx)("td",{children:e.satuan}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.biaya_satuan)}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total_biaya)}),(0,v.jsx)("td",{children:e.keterangan||"-"})]},e.id))),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{colSpan:5,className:"text-end fw-bold",children:"Total Biaya Keseluruhan"}),(0,v.jsx)("td",{colSpan:2,children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.sub_pengajuan.reduce(((e,a)=>e+a.total_biaya),0))})]})]})]})})})})]})}),d(!0)})(e),children:"Pending Approval"}),width:"200px"},{name:"Tanggal Pengajuan",selector:e=>new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),width:"200px"},{name:"Jenis Permohonan",selector:e=>e.pengajuan,width:"250px"},{name:"No Dokumen",selector:e=>e.no_dokumen,width:"200px"},{name:"Nama Barang/Jasa",selector:e=>e.sub_pengajuan[0].nama_item},{name:"Jumlah Barang/Jasa",selector:e=>e.sub_pengajuan[0].jumlah},{name:"Satuan",selector:e=>e.sub_pengajuan[0].satuan},{name:"Biaya Satuan",selector:e=>(0,v.jsx)("div",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.sub_pengajuan[0].biaya_satuan)})}];return(0,v.jsxs)("div",{children:[(0,v.jsx)(l.A,{children:(0,v.jsxs)(p.A,{className:"p-4",children:[(0,v.jsx)("div",{className:"mb-3 d-flex align-items-center justify-content-end",children:(0,v.jsx)("input",{type:"text",className:"form-control w-25",placeholder:"Cari...",value:F,onChange:e=>J(e.target.value)})}),K?(0,v.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,v.jsx)(S.A,{color:"primary",size:"sm",className:"me-2"})," Sedang Mengambil Data"]}):O?(0,v.jsx)("div",{className:"text-center",children:"Something went wrong"}):(0,v.jsx)(T.Ay,{columns:M,data:t,pagination:!0,highlightOnHover:!0})]})}),(0,v.jsxs)(P.A,{isOpen:r,toggle:z,size:"xl",children:[(0,v.jsx)(I.A,{toggle:z,children:(null===c||void 0===c?void 0:c.title)||"Detail"}),(0,v.jsxs)(B.A,{children:[null===c||void 0===c?void 0:c.body,w&&(0,v.jsxs)("div",{className:"mt-3",children:[(0,v.jsx)(D.A,{children:(0,v.jsx)("strong",{children:"Alasan Penolakan:"})}),(0,v.jsx)("textarea",{className:"form-control",rows:"3",value:f,onChange:e=>A(e.target.value),placeholder:"Masukkan alasan penolakan"})]})]}),(0,v.jsxs)(L.A,{children:[(0,v.jsx)(_.A,{color:"secondary",onClick:z,children:"Tutup"}),w?(0,v.jsx)(_.A,{color:"danger",onClick:async()=>{if(null===c||void 0===c||!c.row)return;if(!f.trim())return void(0,q.x)("error","Silakan isi alasan penolakan");N(!0);const e={id:c.row.id,status:"reject",alasan:f};try{await n.post("api/pengajuan-approval/reject",e),U(),d(!1),A(""),C(!1),(0,q.x)("success","Pengajuan Ditolak")}catch(a){console.error(a),(0,q.x)("error","Terjadi kesalahan")}finally{N(!1)}},disabled:y,children:y?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S.A,{size:"sm",color:"light",className:"me-2"})," Loading"]}):"Submit Reject"}):(0,v.jsx)(_.A,{color:"danger",onClick:()=>C(!0),children:"Reject"}),(0,v.jsx)(_.A,{color:"primary",onClick:async()=>{if(null===c||void 0===c||!c.row)return;j(!0);const e={id:c.row.id,status:"approve"};try{await n.post("api/pengajuan-approval/approve",e),U(),d(!1),(0,q.x)("success","Pengajuan berhasil diapprove")}catch(a){console.error(a),(0,q.x)("error","Terjadi kesalahan")}finally{j(!1)}},disabled:x,children:x?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S.A,{size:"sm",color:"light",className:"me-2"})," Loading"]}):"Approve"})]})]})]})};var O=n(54211),U=n.n(O),M=n(55360),H=n.n(M);const G=n(49784);G&&G.pdfMake?U().vfs=G.pdfMake.vfs:(console.error("Failed to load pdfmake fonts. Using default font as fallback."),U().vfs={});const Y={Archivo:{normal:"Archivo-Regular.ttf",bold:"Archivo-SemiBold.ttf",italics:"Archivo-Italic.ttf",bolditalics:"Archivo-SemiBoldItalic.ttf"}},V=()=>{const e=(0,u.A)(),[a,n]=(0,s.useState)([]),[t,i]=(0,s.useState)(""),[r,d]=(0,s.useState)(null),[c,o]=(0,s.useState)(!1),{data:m,isLoading:x,error:j}=(0,h.I)({queryKey:["pengajuanSelesai"],queryFn:()=>e.get("/api/pengajuan-selesai").then((e=>(console.log(e),e.data.data)))});(0,s.useEffect)((()=>{n(m||[])}),[m]),(0,s.useEffect)((()=>{n(t?null===m||void 0===m?void 0:m.filter((e=>e.sub_pengajuan[0].nama_item.toLowerCase().includes(t.toLowerCase()))):m)}),[t]);const y=a=>{var n;d({row:a,title:"Detail Pengajuan",body:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsx)(_.A,{color:"primary",onClick:()=>(a=>{U().vfs=G.pdfMake.vfs,U().fonts=Y;const n='\n    <div>\n      <h3 style="text-align: center;">Detail Pengajuan</h3>\n      <div style="text-align: left;">\n      <table style="border: none; border-collapse: collapse; width: 100%;">\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>Jenis Permohonan</strong></td>\n          <td style="border: none; padding: 4px;">: '.concat(a.pengajuan,'</td>\n        </tr>\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>No Dokumen</strong></td>\n          <td style="border: none; padding: 4px;">: ').concat(a.no_dokumen,'</td>\n        </tr>\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>Tanggal Pengajuan</strong></td>\n          <td style="border: none; padding: 4px;">\n            : ').concat(new Date(a.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),'\n          </td>\n        </tr>\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>Lampiran</strong></td>\n          <td style="border: none; padding: 4px;">\n            : <a href="').concat(e.defaults.baseURL,"/pengajuan/").concat(a.lampiran,'" target="_blank">').concat(e.defaults.baseURL,"/pengajuan/").concat(a.lampiran,'</a>\n          </td>\n        </tr>\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>Diapprove oleh</strong></td>\n          <td style="border: none; padding: 4px;">:\n            <ol style="margin-left: 20px;">\n              ').concat(a.approvals.map((e=>'<li style="margin-bottom: 10px;">'.concat(e.full_name," (").concat(e.position_name,") <br/>Approved At: ").concat(new Date(e.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),"</li>"))).join(""),'\n            </ol>\n          </td>\n        </tr>\n        <tr>\n          <td style="border: none; padding: 4px;"><strong>Detail Pengajuan</strong></td>\n          <td style="border: none; padding: 4px;">:</td>\n        </tr>\n        <tr>\n          <td colspan="2" style="border: none; padding: 4px;">\n                  <table style="width: 100%; border-collapse: collapse;" border="1">\n                    <thead>\n                      <tr style="text-align: center;">\n                        <th>No</th>\n                        <th style="white-space:pre-wrap; word-wrap:break-word;">Nama Barang/Jasa</th>\n                        <th>Jumlah</th>\n                        <th>Satuan</th>\n                        <th>Biaya Satuan</th>\n                        <th>Total Biaya</th>\n                        <th>Keterangan</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      ').concat(a.sub_pengajuan.map(((e,a)=>"\n                        <tr>\n                          <td>".concat(a+1,'</td>\n                          <td style="white-space:pre-wrap; word-wrap:break-word;">').concat(e.nama_item,'</td>\n                          <td style="text-align: center;">').concat(e.jumlah,'</td>\n                          <td style="text-align: center;">').concat(e.satuan,"</td>\n                          <td>").concat(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.biaya_satuan),"</td>\n                          <td>").concat(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total_biaya),"</td>\n                          <td>").concat(e.keterangan||"-","</td>\n                        </tr>"))).join(""),'\n                      <tr>\n                        <td colspan="5" style="text-align: right;"><strong>Total Biaya Keseluruhan</strong></td>\n                        <td colspan="2">').concat(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a.sub_pengajuan.reduce(((e,a)=>e+a.total_biaya),0)),"</td>\n                      </tr>\n                    </tbody>\n                  </table>\n          </td>\n        </tr>\n      </table>\n      </div>\n\n      </div>\n    "),s={content:[H()(n,{defaultStyles:{table:{margin:[0,5,0,15]},th:{bold:!0,fillColor:"#eeeeee"}}})],defaultStyle:{font:"Archivo"}};U().createPdf(s).open()})(a),children:"Print PDF"})}),(0,v.jsx)(g.A,{className:"mb-4",children:(0,v.jsx)("table",{style:{border:"none",borderCollapse:"collapse",marginLeft:"10px"},children:(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{style:{border:"none"},children:[(0,v.jsx)("td",{style:{border:"none",width:"200px"},children:(0,v.jsx)("strong",{children:"Jenis Permohonan"})}),(0,v.jsx)("td",{style:{border:"none"},children:(0,v.jsxs)("td",{style:{border:"none"},children:[": ",a.pengajuan]})})]}),(0,v.jsxs)("tr",{style:{border:"none"},children:[(0,v.jsx)("td",{style:{border:"none",width:"200px"},children:(0,v.jsx)("strong",{children:"No Dokumen"})}),(0,v.jsx)("td",{style:{border:"none"},children:(0,v.jsxs)("td",{style:{border:"none"},children:[": ",a.no_dokumen]})})]}),(0,v.jsxs)("tr",{style:{border:"none"},children:[(0,v.jsx)("td",{style:{border:"none",width:"200px"},children:(0,v.jsx)("strong",{children:"Tanggal Pengajuan"})}),(0,v.jsx)("td",{style:{border:"none"},children:(0,v.jsxs)("td",{style:{border:"none"},children:[":"," ",new Date(a.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]}),(0,v.jsxs)("tr",{style:{border:"none"},children:[(0,v.jsx)("td",{style:{border:"none",width:"200px"},children:(0,v.jsx)("strong",{children:"Diapprove oleh"})}),(0,v.jsx)("td",{style:{border:"none"},children:(0,v.jsx)("td",{style:{border:"none"},children:":"})})]})]})})}),(0,v.jsx)(g.A,{className:"mb-4",children:null===a||void 0===a||null===(n=a.approvals)||void 0===n?void 0:n.map((e=>(0,v.jsx)(b.A,{md:4,className:"mb-3",children:(0,v.jsxs)("div",{className:"shadow-sm p-3 bg-light rounded",children:[(0,v.jsx)("h5",{className:"mb-1",children:null===e||void 0===e?void 0:e.full_name}),(0,v.jsx)("p",{className:"mb-1 text-muted",children:e.position_name}),(0,v.jsxs)("small",{className:"text-muted",children:[(0,v.jsx)("strong",{children:"Approved At: "}),new Date(e.updated_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})},e.id)))}),(0,v.jsx)(g.A,{children:(0,v.jsx)(b.A,{children:(0,v.jsx)("div",{className:"table-responsive",children:(0,v.jsxs)(k.A,{bordered:!0,responsive:!0,hover:!0,children:[(0,v.jsx)("thead",{className:"",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"text-center",style:{width:"50px"},children:"No"}),(0,v.jsx)("th",{children:"Nama Barang/Jasa"}),(0,v.jsx)("th",{children:"Jumlah"}),(0,v.jsx)("th",{children:"Satuan"}),(0,v.jsx)("th",{children:"Biaya Satuan"}),(0,v.jsx)("th",{children:"Total Biaya"}),(0,v.jsx)("th",{children:"Keterangan"})]})}),(0,v.jsxs)("tbody",{children:[a.sub_pengajuan.map(((e,a)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"text-center",children:a+1}),(0,v.jsx)("td",{style:{whiteSpace:"pre-wrap"},children:e.nama_item}),(0,v.jsx)("td",{children:e.jumlah}),(0,v.jsx)("td",{children:e.satuan}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.biaya_satuan)}),(0,v.jsx)("td",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.total_biaya)}),(0,v.jsx)("td",{children:e.keterangan||"-"})]},e.id))),(0,v.jsxs)("tr",{className:"fw-bold",children:[(0,v.jsx)("td",{colSpan:5,className:"text-end",children:"Total Biaya Keseluruhan"}),(0,v.jsx)("td",{colSpan:2,children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a.sub_pengajuan.reduce(((e,a)=>e+a.total_biaya),0))})]})]})]})})})})]})}),o(!0)},N=[{name:"No",selector:(e,a)=>a+1,width:"50px"},{name:"Aksi",selector:e=>(0,v.jsx)("div",{className:"d-flex justify-content-center",children:(0,v.jsx)(_.A,{outline:!0,color:"info",size:"sm",onClick:()=>y(e),children:"Detail"})})},{name:"Tanggal Pengajuan",selector:e=>new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),width:"200px"},{name:"Jenis Permohonan",selector:e=>e.pengajuan,width:"250px"},{name:"No Dokumen",selector:e=>e.no_dokumen,width:"200px"},{name:"Nama Barang/Jasa",selector:e=>e.sub_pengajuan[0].nama_item},{name:"Jumlah Barang/Jasa",selector:e=>e.sub_pengajuan[0].jumlah},{name:"Satuan",selector:e=>e.sub_pengajuan[0].satuan},{name:"Biaya Satuan",selector:e=>(0,v.jsx)("div",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.sub_pengajuan[0].biaya_satuan)})}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsx)("div",{className:"mb-3 d-flex align-items-center justify-content-end",children:(0,v.jsx)("input",{type:"text",className:"form-control w-25",placeholder:"Cari...",value:t,onChange:e=>i(e.target.value)})}),x?(0,v.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,v.jsx)(S.A,{color:"primary",size:"sm",className:"me-2"})," Sedang Mengambil Data"]}):j?(0,v.jsx)("div",{className:"text-center",children:"Something went wrong"}):(0,v.jsx)(T.Ay,{columns:N,data:a,pagination:!0,highlightOnHover:!0})]})}),(0,v.jsxs)(P.A,{isOpen:c,toggle:()=>o(!c),size:"xl",children:[(0,v.jsx)(I.A,{toggle:()=>o(!c),children:"Detail Pengajuan"}),(0,v.jsx)(B.A,{children:null===r||void 0===r?void 0:r.body}),(0,v.jsx)(L.A,{children:(0,v.jsx)(_.A,{color:"secondary",onClick:()=>o(!1),children:"Tutup"})})]})]})},Q=()=>{const e=(0,u.A)(),a=(0,t.zy)(),[n,j]=(0,s.useState)([]),{data:p}=(0,h.I)(["dashboard-pengajuan"],(()=>e.get("/api/pengajuan-dashboard").then((e=>e.data.data)))),{data:g}=(0,h.I)(["chart-pengajuan"],(()=>e.get("/api/pengajuan-dashboard/chart").then((e=>(console.log("Data Chart",e.data.data),e.data.data)))));(0,s.useEffect)((()=>{p&&j(p)}),[p]);const b=JSON.parse(localStorage.getItem("auth")),y=(0,m.jE)(),[N,f]=(0,s.useState)("1"),[A,k]=(0,s.useState)(0);(0,s.useEffect)((()=>{y.invalidateQueries(["approval-pengajuan-all"])}),[]);return(0,s.useEffect)((()=>{"approval"===new URLSearchParams(a.search).get("tab")&&f("3")}),[a]),(0,v.jsxs)("div",{children:[(0,v.jsx)(x.A,{}),(0,v.jsxs)(i.Ay,{value:N,children:[(0,v.jsx)(l.A,{className:"mb-1",children:(0,v.jsxs)(r.A,{onChange:(e,a)=>{f(a)},vertical:"sm",variant:"scrollable",scrollButtons:"auto",children:[(0,v.jsx)(c.A,{label:(0,v.jsxs)(o.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,v.jsx)("strong",{children:"DASHBOARD"})," \xa0\xa0"]}),value:"1"}),(null===b||void 0===b?void 0:b.user.roles.includes("AdminPengajuan"))&&(0,v.jsx)(c.A,{label:(0,v.jsxs)(o.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary ",children:[(0,v.jsx)("strong",{children:"PENGAJUAN"})," \xa0\xa0"]}),value:"2"}),((null===b||void 0===b?void 0:b.user.roles.includes("ManagerUmum"))||(null===b||void 0===b?void 0:b.user.roles.includes("DirekturUmumKeuangan"))||(null===b||void 0===b?void 0:b.user.roles.includes("Presdir")))&&(0,v.jsx)(c.A,{label:(0,v.jsxs)(o.A,{badgeContent:(A>99?"99+":A)||((null===n||void 0===n?void 0:n.total_pengajuan_belum_selesai)>99?"99+":null===n||void 0===n?void 0:n.total_pengajuan_belum_selesai),anchorOrigin:{vertical:"top",horizontal:"right"},color:"warning",style:{textTransform:"capitalize"},children:[(0,v.jsx)("strong",{children:"APPROVAL PENGAJUAN"})," \xa0\xa0"]}),value:"3"}),(0,v.jsx)(c.A,{label:(0,v.jsxs)(o.A,{badgeContent:0,anchorOrigin:{vertical:"top",horizontal:"right"},color:"primary",children:[(0,v.jsx)("strong",{children:"PENGAJUAN SELESAI"})," \xa0\xa0"]}),value:"4"})]})}),(0,v.jsx)(d.A,{value:"1",className:"ps-0 pe-0",children:(0,v.jsx)(w,{diproses:null===n||void 0===n?void 0:n.total_pengajuan_belum_selesai,selesai:null===n||void 0===n?void 0:n.total_pengajuan_selesai,totalPengajuan:null===n||void 0===n?void 0:n.total_pengajuan,dataChart:g})}),(0,v.jsx)(d.A,{value:"2",className:"ps-0 pe-0",children:(0,v.jsx)(E,{})}),(0,v.jsx)(d.A,{value:"3",className:"ps-0 pe-0",children:(0,v.jsx)(K,{setBadgeCount:k})}),(0,v.jsxs)(d.A,{value:"4",className:"ps-0 pe-0",children:[(0,v.jsx)(V,{})," "]})]})]})}}}]);
//# sourceMappingURL=2940.7e1d4660.chunk.js.map