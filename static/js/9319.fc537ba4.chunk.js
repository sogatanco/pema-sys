"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[9319],{39319:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(65043),i=a(73216),o=a(35475),l=a(55918),r=a.n(l),s=a(89804),d=a(45061),c=a(60446),p=a.n(c),u=(a(67819),a(93397)),g=a(46913),m=a(74301),h=a(84304),v=a(70579);const b=()=>{const e=(0,n.useRef)(),{idDoc:t}=(0,i.g)(),[a]=(0,o.ok)(),l=a.get("type"),[c,b]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[A,w]=(0,n.useState)(),S=(0,u.A)();(0,n.useEffect)((()=>{!async function(){x(!0),await S.post("dapi/verif/".concat(t),{type:l}).then((e=>{console.log(e.data.data),"approve"===e.data.data.status?(x(!1),w(e.data.data)):(b(!0),x(!1))})).catch((()=>{b(!0),x(!1)}))}()}),[]);const N=()=>{console.log(null===A||void 0===A?void 0:A.detail),j(!0),setTimeout((()=>{j(!1),async function(t){try{var a;const n=await(0,h.A)(t,e);(0,m.A)(n,null===A||void 0===A||null===(a=A.detail)||void 0===a?void 0:a.fileLampiran).then((e=>{const t=window.open(e);if(!t||t.closed||"undefined"===typeof t.closed){const t=document.createElement("a");t.href=e,t.download="file.txt",document.body.appendChild(t),t.click(),document.body.removeChild(t)}URL.revokeObjectURL(e)}))}catch(n){console.log(n)}}(null===A||void 0===A?void 0:A.detail)}),300)};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"verified-status",children:(0,v.jsx)("div",{className:"content-status",children:f?(0,v.jsx)("h5",{children:"Loading..."}):c||null===A?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:g,alt:"logo"}),(0,v.jsxs)("div",{className:"verified",children:[(0,v.jsxs)("div",{className:"icon-close",children:[(0,v.jsx)("br",{}),"  ",(0,v.jsx)("br",{}),(0,v.jsx)(r(),{icon:"close"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("span",{style:{marginBottom:"-10px",textTransform:"uppercase"},children:(0,v.jsxs)("strong",{children:[" Dokumen ",null===A||void 0===A?void 0:A.jenis_name]})}),(0,v.jsx)("span",{className:"small mt-0",children:"ini tidak terdaftar di database kami"})]}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsx)("br",{}),(0,v.jsxs)("div",{className:"copyright",children:[(0,v.jsx)("span",{children:"DOCUMENT VERIFICATION SYSTEM"}),(0,v.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," PT Pembangunan Aceh"]})]}),(0,v.jsx)("br",{})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("img",{src:g,alt:"logo"}),(0,v.jsxs)("div",{className:"verified",children:[(0,v.jsx)("div",{className:"icon-check",children:(0,v.jsx)(r(),{icon:"check"})}),(0,v.jsx)("span",{style:{marginBottom:"-10px",textTransform:"uppercase"},children:(0,v.jsxs)("strong",{children:[" Dokumen ",null===A||void 0===A?void 0:A.jenis_name]})}),(0,v.jsx)("span",{className:"small mt-0",children:"ini benar telah ditandatangani"})]}),(0,v.jsxs)("div",{className:"spda-status-container",children:[(0,v.jsxs)("div",{className:"no-spda",children:[(0,v.jsx)("span",{children:"oleh"}),(0,v.jsx)("span",{children:null===A||void 0===A?void 0:A.employe_name})]}),(0,v.jsxs)("div",{className:"spda-status",children:[(0,v.jsx)("span",{children:"sebagai"}),(0,v.jsx)("span",{children:null===A||void 0===A?void 0:A.id_current_position})]}),(0,v.jsxs)("div",{className:"spda-status",children:[(0,v.jsx)("span",{children:"Pada"}),(0,v.jsx)("span",{children:p()(null===A||void 0===A?void 0:A.updated_at).locale("id").format("dddd, DD MMMM YYYY")||""})]})]}),2===(null===A||void 0===A?void 0:A.jenis_doc)&&(0,v.jsxs)(s.A,{color:"info",style:{zIndex:3,cursor:"pointer"},onClick:()=>N(),children:[" ",y?"Loading...":"Lihat surat"," "]}),(0,v.jsx)("br",{}),(0,v.jsxs)("div",{className:"copyright",children:[(0,v.jsx)("span",{children:"DOCUMENT VERIFICATION SYSTEM"}),(0,v.jsxs)("span",{children:["\xa9 ",(new Date).getFullYear()," PT Pembangunan Aceh"]})]})]})})}),(0,v.jsx)("div",{ref:e,style:{display:"none"},children:(0,v.jsx)(d.QRCode,{value:"".concat("https://sys.ptpema.co.id/","verification/").concat(null===A||void 0===A?void 0:A.id_doc,"?type=sign"),size:400,qrStyle:"dots",logoImage:g,logoWidth:100,logoHeight:100,eyeRadius:20,fgColor:"#0F52BA"})})]})}},74301:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(81105);const i=async(e,t)=>{if(!t){const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),a=new Blob([t],{type:"application/pdf"});return URL.createObjectURL(a)}const a=new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),i=new Uint8Array(atob(t).split("").map((e=>e.charCodeAt(0)))),o=await(async(e,t)=>{const a=await n.PDFDocument.create(),i=await n.PDFDocument.load(e),o=await n.PDFDocument.load(t),l=await a.copyPages(i,i.getPageIndices()),r=await a.copyPages(o,o.getPageIndices());l.forEach((e=>{a.addPage(e)})),r.forEach((e=>{a.addPage(e)}));return await a.save()})(a,i),l=new Blob([o],{type:"application/pdf"});return URL.createObjectURL(l)}},84304:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(54211),i=a(55360),o=a.n(i),l=a(91769);const r=function(e){const t=["Nol","Satu","Dua","Tiga","Empat","Lima","Enam","Tujuh","Delapan","Sembilan","Sepuluh","Sebelas"];if(e<12)return t[e];const a=["","Belas","Puluh","Ratus","Ribu","Juta","Miliar","Triliun"];let n="";const i=e.toString(),o=null===i||void 0===i?void 0:i.length;if(o>12)return"Angka terlalu besar";for(let l=0;l<o;l++){const e=parseInt(i.charAt(l),10),r=o-l-1;if(0===e&&(n+=""),1===r&&1===e&&"0"!==i.charAt(l+1)){n+=" Sebelas";break}n+=" ".concat(t[e]," ").concat(a[r])}return n.trim()},s=a(49784),d=(e,t)=>new Promise(((a,i)=>{n.vfs=s.pdfMake.vfs,n.fonts={Archivo:{normal:"Archivo-Regular.ttf",bold:"Archivo-SemiBold.ttf",italics:"Archivo-Italic.ttf",bolditalics:"Archivo-SemiBoldItalic.ttf"}};const d='<p style="margin-bottom:5px">Banda Aceh, '.concat(new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(null===e||void 0===e?void 0:e.tglSurat)),'</p>  \n      \n        <table style="border-collapse: collapse; width: 100%; border: 0px;" border="1"; padding="0";><colgroup><col style="width: 13%;"><col style="width: 2%;"><col style="width: 85%;"></colgroup>\n        <tbody>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2; " >Nomor</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;" >:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">').concat(null===e||void 0===e?void 0:e.nomorSurat,'</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Lampiran</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">').concat(Number(null===e||void 0===e?void 0:e.lampiran)>0?"".concat(null===e||void 0===e?void 0:e.lampiran," (").concat(r(Number(null===e||void 0===e?void 0:e.lampiran)),") ").concat((null===e||void 0===e?void 0:e.jenisLampiran)||" Eks"):"-",'</td>\n          </tr>\n          <tr style="margin-left:-5">\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">Perihal</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">:</td>\n            <td style="vertical-align: top; border: 0px; line-height: 1.2;">').concat(null===e||void 0===e?void 0:e.perihal,'</td>\n          </tr>\n        </tbody>\n      </table>\n\n        <div style="line-height: 1.2; margin-top:3; margin-bottom:-12">Kepada Yth<br>\n            <strong style="line-height: 0.9!important;">').concat(null===e||void 0===e?void 0:e.kepada,'</strong><br>\n            di - <br>\n            <span>          Tempat</span>\n        </div>\n       <span style="line-height: 1.3; text-align:justify">  ').concat(null===e||void 0===e?void 0:e.isiSurat,"</span>\n  \n      ");if(t.current){const r=t.current.querySelector("canvas");if(r){var c,p,u;const t=r.toDataURL(),s={pageOrientation:"portrait",pageSize:"A4",pageMargins:[50,70,50,70],content:[o()(d,{defaultStyles:{p:{margin:[0,3,0,-12]},td:{verticalAlign:"top",marginBottom:-4,heigt:"auto"},ol:{margin:[0,0,0,-15],padding:[0,0,0,0]},ul:{margin:[0,0,0,-15],padding:[0,0,0,0]},li:{marginBottom:2},tr:{margin:[-5,0,0,0]},table:{margin:[0,-3,0,-7],width:"100%"},br:{margin:[0,0,0,0]}},tableAutoSize:!0}),{stack:[{text:"Hormat Kami, ",style:"normal"},{text:"PT PEMBANGUNAN ACEH",style:"boldText"},{image:"".concat("signed"===(null===e||void 0===e?void 0:e.status)?t:l.A.placeholder),width:60},{text:"".concat(null===e||void 0===e||null===(c=e.signer)||void 0===c?void 0:c.first_name),style:"boldText"},{text:"".concat(null===e||void 0===e||null===(p=e.signer)||void 0===p?void 0:p.position_name),style:"normal"}],unbreakable:!0,margin:[0,10]},{text:(null===e||void 0===e||null===(u=e.tembusans)||void 0===u?void 0:u.length)>0?"Tembusan Yth : ":"",style:"normal"},{ol:null===e||void 0===e?void 0:e.tembusans}],background:()=>null!==e&&void 0!==e&&e.draft?{image:l.A.draft,width:300,height:300,opacity:.2,marginTop:250,marginLeft:150}:"",styles:{boldText:{bold:!0}},images:d.images,header:e=>1!==e?{text:""}:{image:l.A.headSurat,width:"595"},footer:(e,t)=>e!==t?{text:""}:{image:l.A.footSurat,width:"595"},defaultStyle:{font:"Archivo",fontSize:10,color:"#000",ol:{margin:[0,0,0,0],padding:[0,0,0,0]}}};n.createPdf(s).getBase64((e=>{e?a(e):i(new Error("Error generating base64 PDF"))}))}}}))},89804:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(65043),i=a(65173),o=a.n(i),l=a(98139),r=a.n(l),s=a(96794),d=["className","cssModule","color","innerRef","pill","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var u={children:o().node,className:o().string,color:o().string,cssModule:o().object,innerRef:o().oneOfType([o().object,o().func,o().string]),pill:o().bool,tag:s.Wx};function g(e){var t=e.className,a=e.cssModule,i=e.color,o=void 0===i?"secondary":i,l=e.innerRef,u=e.pill,g=void 0!==u&&u,m=e.tag,h=void 0===m?"span":m,v=p(e,d),b=(0,s.qO)(r()(t,"badge","bg-"+o,!!g&&"rounded-pill"),a);return v.href&&"span"===h&&(h="a"),n.createElement(h,c({},v,{className:b,ref:l}))}g.propTypes=u;const m=g}}]);
//# sourceMappingURL=9319.fc537ba4.chunk.js.map